{
  "address": "0x95e943DB8a2Bcee746accB61D4E750B7F0f5DFe6",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "available",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "required",
          "type": "uint256"
        }
      ],
      "name": "InsufficientBalance",
      "type": "error"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "termId",
          "type": "uint256"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "participant",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "bool",
          "name": "enabled",
          "type": "bool"
        }
      ],
      "name": "OnAutoPayToggled",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "termId",
          "type": "uint256"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "beneficiary",
          "type": "address"
        }
      ],
      "name": "OnBeneficiaryAwarded",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "termId",
          "type": "uint256"
        },
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "currentCycle",
          "type": "uint256"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "expellant",
          "type": "address"
        }
      ],
      "name": "OnDefaulterExpelled",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "termId",
          "type": "uint256"
        },
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "currentCycle",
          "type": "uint256"
        },
        {
          "indexed": true,
          "internalType": "enum LibFundStorage.FundStates",
          "name": "newState",
          "type": "uint8"
        }
      ],
      "name": "OnFundStateChanged",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "termId",
          "type": "uint256"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "participant",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "receiver",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "OnFundWithdrawn",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "termId",
          "type": "uint256"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "payer",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "currentCycle",
          "type": "uint256"
        }
      ],
      "name": "OnPaidContribution",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "termId",
          "type": "uint256"
        },
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "currentCycle",
          "type": "uint256"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "defaulter",
          "type": "address"
        }
      ],
      "name": "OnParticipantDefaulted",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "termId",
          "type": "uint256"
        }
      ],
      "name": "closeFundingPeriod",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "termId",
          "type": "uint256"
        }
      ],
      "name": "emptyFundAfterEnd",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "termId",
          "type": "uint256"
        }
      ],
      "name": "payContribution",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "termId",
          "type": "uint256"
        },
        {
          "internalType": "address",
          "name": "participant",
          "type": "address"
        }
      ],
      "name": "payContributionOnBehalfOf",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "termId",
          "type": "uint256"
        }
      ],
      "name": "startNewCycle",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "termId",
          "type": "uint256"
        }
      ],
      "name": "toggleAutoPay",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "termId",
          "type": "uint256"
        }
      ],
      "name": "withdrawFund",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "termId",
          "type": "uint256"
        },
        {
          "internalType": "address",
          "name": "receiver",
          "type": "address"
        }
      ],
      "name": "withdrawFundOnAnotherWallet",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "transactionHash": "0x202b8bd9daba75994c9fe4ee7a979fa8e4ffee98a38d63b7967cdcb0bb10ef71",
  "receipt": {
    "to": "0x4e59b44847b379578588920cA78FbF26c0B4956C",
    "from": "0x3904F59DF9199e0d6dC3800af9f6794c9D037eb1",
    "contractAddress": null,
    "transactionIndex": 3,
    "gasUsed": "2383834",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0x3b8d67cdf6891609bbf6b08ad370ca1ab4fbaaa724f2e8483982f98470598270",
    "transactionHash": "0x202b8bd9daba75994c9fe4ee7a979fa8e4ffee98a38d63b7967cdcb0bb10ef71",
    "logs": [],
    "blockNumber": 212040137,
    "cumulativeGasUsed": "2571303",
    "status": 1,
    "byzantium": true
  },
  "args": [],
  "numDeployments": 13,
  "solcInputHash": "9100f06a133b8e1224998fdff7efefb3",
  "metadata": "{\"compiler\":{\"version\":\"0.8.18+commit.87f61d96\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"available\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"required\",\"type\":\"uint256\"}],\"name\":\"InsufficientBalance\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"termId\",\"type\":\"uint256\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"participant\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"bool\",\"name\":\"enabled\",\"type\":\"bool\"}],\"name\":\"OnAutoPayToggled\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"termId\",\"type\":\"uint256\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"beneficiary\",\"type\":\"address\"}],\"name\":\"OnBeneficiaryAwarded\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"termId\",\"type\":\"uint256\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"currentCycle\",\"type\":\"uint256\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"expellant\",\"type\":\"address\"}],\"name\":\"OnDefaulterExpelled\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"termId\",\"type\":\"uint256\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"currentCycle\",\"type\":\"uint256\"},{\"indexed\":true,\"internalType\":\"enum LibFundStorage.FundStates\",\"name\":\"newState\",\"type\":\"uint8\"}],\"name\":\"OnFundStateChanged\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"termId\",\"type\":\"uint256\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"participant\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"receiver\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"OnFundWithdrawn\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"termId\",\"type\":\"uint256\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"payer\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"currentCycle\",\"type\":\"uint256\"}],\"name\":\"OnPaidContribution\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"termId\",\"type\":\"uint256\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"currentCycle\",\"type\":\"uint256\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"defaulter\",\"type\":\"address\"}],\"name\":\"OnParticipantDefaulted\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"termId\",\"type\":\"uint256\"}],\"name\":\"closeFundingPeriod\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"termId\",\"type\":\"uint256\"}],\"name\":\"emptyFundAfterEnd\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"termId\",\"type\":\"uint256\"}],\"name\":\"payContribution\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"termId\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"participant\",\"type\":\"address\"}],\"name\":\"payContributionOnBehalfOf\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"termId\",\"type\":\"uint256\"}],\"name\":\"startNewCycle\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"termId\",\"type\":\"uint256\"}],\"name\":\"toggleAutoPay\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"termId\",\"type\":\"uint256\"}],\"name\":\"withdrawFund\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"termId\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"receiver\",\"type\":\"address\"}],\"name\":\"withdrawFundOnAnotherWallet\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"author\":\"Mohammed Haddouti\",\"details\":\"v3.0 (Diamond)\",\"errors\":{\"InsufficientBalance(uint256,uint256)\":[{\"details\":\"Insufficient balance for transfer. Needed `required` but only `available` available.\",\"params\":{\"available\":\"balance available.\",\"required\":\"requested amount to transfer.\"}}]},\"kind\":\"dev\",\"methods\":{\"closeFundingPeriod(uint256)\":{\"details\":\"Revert if there is still time to contributeRevert if Fund is not accepting contributions\",\"params\":{\"termId\":\"the id of the term\"}},\"emptyFundAfterEnd(uint256)\":{\"details\":\"Revert if the caller is not the term ownerRevert if the time is not met (180 days)\",\"params\":{\"termId\":\"the id of the term\"}},\"payContribution(uint256)\":{\"params\":{\"termId\":\"the id of the term\"}},\"payContributionOnBehalfOf(uint256,address)\":{\"params\":{\"participant\":\"the address the msg.sender is paying for, the address must be part of the fund\",\"termId\":\"the id of the term\"}},\"startNewCycle(uint256)\":{\"params\":{\"termId\":\"the id of the term\"}},\"toggleAutoPay(uint256)\":{\"details\":\"Revert if the user is not a collateral memberRevert if the Fund is closedIt needs the user to have enough tokens and allow the contract as spenderCan be set before the Fund starts\",\"params\":{\"termId\":\"the id of the term\"}},\"withdrawFund(uint256)\":{\"details\":\"This follows the pull-over-push pattern.\",\"params\":{\"termId\":\"the id of the term\"}},\"withdrawFundOnAnotherWallet(uint256,address)\":{\"details\":\"This follows the pull-over-push pattern.\",\"params\":{\"receiver\":\"the address that will receive the fund\",\"termId\":\"the id of the term\"}}},\"title\":\"Takaturn Fund Facet\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"closeFundingPeriod(uint256)\":{\"notice\":\"Must be called at the end of the contribution period after the time has passed by the owner\"},\"emptyFundAfterEnd(uint256)\":{\"notice\":\"allow the owner to empty the fund if there's any excess fund left after 180 days,         this with the assumption that beneficiaries can't claim it themselves due to losing their keys for example,         and prevent the fund to be stuck in limbo\"},\"payContribution(uint256)\":{\"notice\":\"This is the function participants call to pay the contribution\"},\"payContributionOnBehalfOf(uint256,address)\":{\"notice\":\"This function is here to give the possibility to pay using a different wallet\"},\"startNewCycle(uint256)\":{\"notice\":\"starts a new cycle manually called by the owner. Only the first cycle starts automatically upon deploy\"},\"toggleAutoPay(uint256)\":{\"notice\":\"function to enable/disable autopay\"},\"withdrawFund(uint256)\":{\"notice\":\"Called by the beneficiary to withdraw the fund\"},\"withdrawFundOnAnotherWallet(uint256,address)\":{\"notice\":\"Called by the beneficiary to withdraw the fund\"}},\"notice\":\"This is used to operate the Takaturn fund\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/facets/FundFacet.sol\":\"FundFacet\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[]},\"sources\":{\"@openzeppelin/contracts/token/ERC20/IERC20.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.9.0) (token/ERC20/IERC20.sol)\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev Interface of the ERC20 standard as defined in the EIP.\\n */\\ninterface IERC20 {\\n    /**\\n     * @dev Emitted when `value` tokens are moved from one account (`from`) to\\n     * another (`to`).\\n     *\\n     * Note that `value` may be zero.\\n     */\\n    event Transfer(address indexed from, address indexed to, uint256 value);\\n\\n    /**\\n     * @dev Emitted when the allowance of a `spender` for an `owner` is set by\\n     * a call to {approve}. `value` is the new allowance.\\n     */\\n    event Approval(address indexed owner, address indexed spender, uint256 value);\\n\\n    /**\\n     * @dev Returns the amount of tokens in existence.\\n     */\\n    function totalSupply() external view returns (uint256);\\n\\n    /**\\n     * @dev Returns the amount of tokens owned by `account`.\\n     */\\n    function balanceOf(address account) external view returns (uint256);\\n\\n    /**\\n     * @dev Moves `amount` tokens from the caller's account to `to`.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function transfer(address to, uint256 amount) external returns (bool);\\n\\n    /**\\n     * @dev Returns the remaining number of tokens that `spender` will be\\n     * allowed to spend on behalf of `owner` through {transferFrom}. This is\\n     * zero by default.\\n     *\\n     * This value changes when {approve} or {transferFrom} are called.\\n     */\\n    function allowance(address owner, address spender) external view returns (uint256);\\n\\n    /**\\n     * @dev Sets `amount` as the allowance of `spender` over the caller's tokens.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * IMPORTANT: Beware that changing an allowance with this method brings the risk\\n     * that someone may use both the old and the new allowance by unfortunate\\n     * transaction ordering. One possible solution to mitigate this race\\n     * condition is to first reduce the spender's allowance to 0 and set the\\n     * desired value afterwards:\\n     * https://github.com/ethereum/EIPs/issues/20#issuecomment-263524729\\n     *\\n     * Emits an {Approval} event.\\n     */\\n    function approve(address spender, uint256 amount) external returns (bool);\\n\\n    /**\\n     * @dev Moves `amount` tokens from `from` to `to` using the\\n     * allowance mechanism. `amount` is then deducted from the caller's\\n     * allowance.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function transferFrom(address from, address to, uint256 amount) external returns (bool);\\n}\\n\",\"keccak256\":\"0x287b55befed2961a7eabd7d7b1b2839cbca8a5b80ef8dcbb25ed3d4c2002c305\",\"license\":\"MIT\"},\"@openzeppelin/contracts/utils/structs/EnumerableSet.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.9.0) (utils/structs/EnumerableSet.sol)\\n// This file was procedurally generated from scripts/generate/templates/EnumerableSet.js.\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev Library for managing\\n * https://en.wikipedia.org/wiki/Set_(abstract_data_type)[sets] of primitive\\n * types.\\n *\\n * Sets have the following properties:\\n *\\n * - Elements are added, removed, and checked for existence in constant time\\n * (O(1)).\\n * - Elements are enumerated in O(n). No guarantees are made on the ordering.\\n *\\n * ```solidity\\n * contract Example {\\n *     // Add the library methods\\n *     using EnumerableSet for EnumerableSet.AddressSet;\\n *\\n *     // Declare a set state variable\\n *     EnumerableSet.AddressSet private mySet;\\n * }\\n * ```\\n *\\n * As of v3.3.0, sets of type `bytes32` (`Bytes32Set`), `address` (`AddressSet`)\\n * and `uint256` (`UintSet`) are supported.\\n *\\n * [WARNING]\\n * ====\\n * Trying to delete such a structure from storage will likely result in data corruption, rendering the structure\\n * unusable.\\n * See https://github.com/ethereum/solidity/pull/11843[ethereum/solidity#11843] for more info.\\n *\\n * In order to clean an EnumerableSet, you can either remove all elements one by one or create a fresh instance using an\\n * array of EnumerableSet.\\n * ====\\n */\\nlibrary EnumerableSet {\\n    // To implement this library for multiple types with as little code\\n    // repetition as possible, we write it in terms of a generic Set type with\\n    // bytes32 values.\\n    // The Set implementation uses private functions, and user-facing\\n    // implementations (such as AddressSet) are just wrappers around the\\n    // underlying Set.\\n    // This means that we can only create new EnumerableSets for types that fit\\n    // in bytes32.\\n\\n    struct Set {\\n        // Storage of set values\\n        bytes32[] _values;\\n        // Position of the value in the `values` array, plus 1 because index 0\\n        // means a value is not in the set.\\n        mapping(bytes32 => uint256) _indexes;\\n    }\\n\\n    /**\\n     * @dev Add a value to a set. O(1).\\n     *\\n     * Returns true if the value was added to the set, that is if it was not\\n     * already present.\\n     */\\n    function _add(Set storage set, bytes32 value) private returns (bool) {\\n        if (!_contains(set, value)) {\\n            set._values.push(value);\\n            // The value is stored at length-1, but we add 1 to all indexes\\n            // and use 0 as a sentinel value\\n            set._indexes[value] = set._values.length;\\n            return true;\\n        } else {\\n            return false;\\n        }\\n    }\\n\\n    /**\\n     * @dev Removes a value from a set. O(1).\\n     *\\n     * Returns true if the value was removed from the set, that is if it was\\n     * present.\\n     */\\n    function _remove(Set storage set, bytes32 value) private returns (bool) {\\n        // We read and store the value's index to prevent multiple reads from the same storage slot\\n        uint256 valueIndex = set._indexes[value];\\n\\n        if (valueIndex != 0) {\\n            // Equivalent to contains(set, value)\\n            // To delete an element from the _values array in O(1), we swap the element to delete with the last one in\\n            // the array, and then remove the last element (sometimes called as 'swap and pop').\\n            // This modifies the order of the array, as noted in {at}.\\n\\n            uint256 toDeleteIndex = valueIndex - 1;\\n            uint256 lastIndex = set._values.length - 1;\\n\\n            if (lastIndex != toDeleteIndex) {\\n                bytes32 lastValue = set._values[lastIndex];\\n\\n                // Move the last value to the index where the value to delete is\\n                set._values[toDeleteIndex] = lastValue;\\n                // Update the index for the moved value\\n                set._indexes[lastValue] = valueIndex; // Replace lastValue's index to valueIndex\\n            }\\n\\n            // Delete the slot where the moved value was stored\\n            set._values.pop();\\n\\n            // Delete the index for the deleted slot\\n            delete set._indexes[value];\\n\\n            return true;\\n        } else {\\n            return false;\\n        }\\n    }\\n\\n    /**\\n     * @dev Returns true if the value is in the set. O(1).\\n     */\\n    function _contains(Set storage set, bytes32 value) private view returns (bool) {\\n        return set._indexes[value] != 0;\\n    }\\n\\n    /**\\n     * @dev Returns the number of values on the set. O(1).\\n     */\\n    function _length(Set storage set) private view returns (uint256) {\\n        return set._values.length;\\n    }\\n\\n    /**\\n     * @dev Returns the value stored at position `index` in the set. O(1).\\n     *\\n     * Note that there are no guarantees on the ordering of values inside the\\n     * array, and it may change when more values are added or removed.\\n     *\\n     * Requirements:\\n     *\\n     * - `index` must be strictly less than {length}.\\n     */\\n    function _at(Set storage set, uint256 index) private view returns (bytes32) {\\n        return set._values[index];\\n    }\\n\\n    /**\\n     * @dev Return the entire set in an array\\n     *\\n     * WARNING: This operation will copy the entire storage to memory, which can be quite expensive. This is designed\\n     * to mostly be used by view accessors that are queried without any gas fees. Developers should keep in mind that\\n     * this function has an unbounded cost, and using it as part of a state-changing function may render the function\\n     * uncallable if the set grows to a point where copying to memory consumes too much gas to fit in a block.\\n     */\\n    function _values(Set storage set) private view returns (bytes32[] memory) {\\n        return set._values;\\n    }\\n\\n    // Bytes32Set\\n\\n    struct Bytes32Set {\\n        Set _inner;\\n    }\\n\\n    /**\\n     * @dev Add a value to a set. O(1).\\n     *\\n     * Returns true if the value was added to the set, that is if it was not\\n     * already present.\\n     */\\n    function add(Bytes32Set storage set, bytes32 value) internal returns (bool) {\\n        return _add(set._inner, value);\\n    }\\n\\n    /**\\n     * @dev Removes a value from a set. O(1).\\n     *\\n     * Returns true if the value was removed from the set, that is if it was\\n     * present.\\n     */\\n    function remove(Bytes32Set storage set, bytes32 value) internal returns (bool) {\\n        return _remove(set._inner, value);\\n    }\\n\\n    /**\\n     * @dev Returns true if the value is in the set. O(1).\\n     */\\n    function contains(Bytes32Set storage set, bytes32 value) internal view returns (bool) {\\n        return _contains(set._inner, value);\\n    }\\n\\n    /**\\n     * @dev Returns the number of values in the set. O(1).\\n     */\\n    function length(Bytes32Set storage set) internal view returns (uint256) {\\n        return _length(set._inner);\\n    }\\n\\n    /**\\n     * @dev Returns the value stored at position `index` in the set. O(1).\\n     *\\n     * Note that there are no guarantees on the ordering of values inside the\\n     * array, and it may change when more values are added or removed.\\n     *\\n     * Requirements:\\n     *\\n     * - `index` must be strictly less than {length}.\\n     */\\n    function at(Bytes32Set storage set, uint256 index) internal view returns (bytes32) {\\n        return _at(set._inner, index);\\n    }\\n\\n    /**\\n     * @dev Return the entire set in an array\\n     *\\n     * WARNING: This operation will copy the entire storage to memory, which can be quite expensive. This is designed\\n     * to mostly be used by view accessors that are queried without any gas fees. Developers should keep in mind that\\n     * this function has an unbounded cost, and using it as part of a state-changing function may render the function\\n     * uncallable if the set grows to a point where copying to memory consumes too much gas to fit in a block.\\n     */\\n    function values(Bytes32Set storage set) internal view returns (bytes32[] memory) {\\n        bytes32[] memory store = _values(set._inner);\\n        bytes32[] memory result;\\n\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            result := store\\n        }\\n\\n        return result;\\n    }\\n\\n    // AddressSet\\n\\n    struct AddressSet {\\n        Set _inner;\\n    }\\n\\n    /**\\n     * @dev Add a value to a set. O(1).\\n     *\\n     * Returns true if the value was added to the set, that is if it was not\\n     * already present.\\n     */\\n    function add(AddressSet storage set, address value) internal returns (bool) {\\n        return _add(set._inner, bytes32(uint256(uint160(value))));\\n    }\\n\\n    /**\\n     * @dev Removes a value from a set. O(1).\\n     *\\n     * Returns true if the value was removed from the set, that is if it was\\n     * present.\\n     */\\n    function remove(AddressSet storage set, address value) internal returns (bool) {\\n        return _remove(set._inner, bytes32(uint256(uint160(value))));\\n    }\\n\\n    /**\\n     * @dev Returns true if the value is in the set. O(1).\\n     */\\n    function contains(AddressSet storage set, address value) internal view returns (bool) {\\n        return _contains(set._inner, bytes32(uint256(uint160(value))));\\n    }\\n\\n    /**\\n     * @dev Returns the number of values in the set. O(1).\\n     */\\n    function length(AddressSet storage set) internal view returns (uint256) {\\n        return _length(set._inner);\\n    }\\n\\n    /**\\n     * @dev Returns the value stored at position `index` in the set. O(1).\\n     *\\n     * Note that there are no guarantees on the ordering of values inside the\\n     * array, and it may change when more values are added or removed.\\n     *\\n     * Requirements:\\n     *\\n     * - `index` must be strictly less than {length}.\\n     */\\n    function at(AddressSet storage set, uint256 index) internal view returns (address) {\\n        return address(uint160(uint256(_at(set._inner, index))));\\n    }\\n\\n    /**\\n     * @dev Return the entire set in an array\\n     *\\n     * WARNING: This operation will copy the entire storage to memory, which can be quite expensive. This is designed\\n     * to mostly be used by view accessors that are queried without any gas fees. Developers should keep in mind that\\n     * this function has an unbounded cost, and using it as part of a state-changing function may render the function\\n     * uncallable if the set grows to a point where copying to memory consumes too much gas to fit in a block.\\n     */\\n    function values(AddressSet storage set) internal view returns (address[] memory) {\\n        bytes32[] memory store = _values(set._inner);\\n        address[] memory result;\\n\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            result := store\\n        }\\n\\n        return result;\\n    }\\n\\n    // UintSet\\n\\n    struct UintSet {\\n        Set _inner;\\n    }\\n\\n    /**\\n     * @dev Add a value to a set. O(1).\\n     *\\n     * Returns true if the value was added to the set, that is if it was not\\n     * already present.\\n     */\\n    function add(UintSet storage set, uint256 value) internal returns (bool) {\\n        return _add(set._inner, bytes32(value));\\n    }\\n\\n    /**\\n     * @dev Removes a value from a set. O(1).\\n     *\\n     * Returns true if the value was removed from the set, that is if it was\\n     * present.\\n     */\\n    function remove(UintSet storage set, uint256 value) internal returns (bool) {\\n        return _remove(set._inner, bytes32(value));\\n    }\\n\\n    /**\\n     * @dev Returns true if the value is in the set. O(1).\\n     */\\n    function contains(UintSet storage set, uint256 value) internal view returns (bool) {\\n        return _contains(set._inner, bytes32(value));\\n    }\\n\\n    /**\\n     * @dev Returns the number of values in the set. O(1).\\n     */\\n    function length(UintSet storage set) internal view returns (uint256) {\\n        return _length(set._inner);\\n    }\\n\\n    /**\\n     * @dev Returns the value stored at position `index` in the set. O(1).\\n     *\\n     * Note that there are no guarantees on the ordering of values inside the\\n     * array, and it may change when more values are added or removed.\\n     *\\n     * Requirements:\\n     *\\n     * - `index` must be strictly less than {length}.\\n     */\\n    function at(UintSet storage set, uint256 index) internal view returns (uint256) {\\n        return uint256(_at(set._inner, index));\\n    }\\n\\n    /**\\n     * @dev Return the entire set in an array\\n     *\\n     * WARNING: This operation will copy the entire storage to memory, which can be quite expensive. This is designed\\n     * to mostly be used by view accessors that are queried without any gas fees. Developers should keep in mind that\\n     * this function has an unbounded cost, and using it as part of a state-changing function may render the function\\n     * uncallable if the set grows to a point where copying to memory consumes too much gas to fit in a block.\\n     */\\n    function values(UintSet storage set) internal view returns (uint256[] memory) {\\n        bytes32[] memory store = _values(set._inner);\\n        uint256[] memory result;\\n\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            result := store\\n        }\\n\\n        return result;\\n    }\\n}\\n\",\"keccak256\":\"0x9f4357008a8f7d8c8bf5d48902e789637538d8c016be5766610901b4bba81514\",\"license\":\"MIT\"},\"contracts/facets/FundFacet.sol\":{\"content\":\"// SPDX-License-Identifier: GPL-3.0\\n\\npragma solidity 0.8.18;\\n\\nimport {IERC20} from \\\"@openzeppelin/contracts/token/ERC20/IERC20.sol\\\";\\nimport {IFund} from \\\"../interfaces/IFund.sol\\\";\\nimport {ICollateral} from \\\"../interfaces/ICollateral.sol\\\";\\nimport {IGetters} from \\\"../interfaces/IGetters.sol\\\";\\n\\nimport {EnumerableSet} from \\\"@openzeppelin/contracts/utils/structs/EnumerableSet.sol\\\";\\nimport {LibCollateralStorage} from \\\"../libraries/LibCollateralStorage.sol\\\";\\nimport {LibFundStorage} from \\\"../libraries/LibFundStorage.sol\\\";\\nimport {LibTermStorage} from \\\"../libraries/LibTermStorage.sol\\\";\\nimport {LibCollateral} from \\\"../libraries/LibCollateral.sol\\\";\\nimport {LibTermOwnership} from \\\"../libraries/LibTermOwnership.sol\\\";\\nimport {LibFund} from \\\"../libraries/LibFund.sol\\\";\\nimport {LibDiamond} from \\\"hardhat-deploy/solc_0.8/diamond/libraries/LibDiamond.sol\\\";\\n\\n/// @title Takaturn Fund Facet\\n/// @author Mohammed Haddouti\\n/// @notice This is used to operate the Takaturn fund\\n/// @dev v3.0 (Diamond)\\ncontract FundFacet is IFund {\\n    using EnumerableSet for EnumerableSet.AddressSet;\\n\\n    event OnFundStateChanged(\\n        uint indexed termId,\\n        uint indexed currentCycle,\\n        LibFundStorage.FundStates indexed newState\\n    ); // Emits when state has updated\\n    event OnPaidContribution(uint indexed termId, address indexed payer, uint indexed currentCycle); // Emits when participant pays the contribution\\n    event OnBeneficiaryAwarded(uint indexed termId, address indexed beneficiary); // Emits when beneficiary is selected for this cycle\\n    event OnFundWithdrawn(\\n        uint indexed termId,\\n        address indexed participant,\\n        address receiver,\\n        uint indexed amount\\n    ); // Emits when a chosen beneficiary claims their fund\\n    event OnParticipantDefaulted(\\n        uint indexed termId,\\n        uint indexed currentCycle,\\n        address indexed defaulter\\n    ); // Emits when a participant didn't pay this cycle's contribution\\n    event OnDefaulterExpelled(\\n        uint indexed termId,\\n        uint indexed currentCycle,\\n        address indexed expellant\\n    ); // Emits when a defaulter can't compensate with the collateral\\n    event OnAutoPayToggled(uint indexed termId, address indexed participant, bool indexed enabled); // Emits when a participant succesfully toggles autopay\\n\\n    modifier onlyOwner() {\\n        LibDiamond.enforceIsContractOwner();\\n        _;\\n    }\\n\\n    /// @dev Insufficient balance for transfer. Needed `required` but only `available` available.\\n    /// @param available balance available.\\n    /// @param required requested amount to transfer.\\n    error InsufficientBalance(uint available, uint required);\\n\\n    /// @notice starts a new cycle manually called by the owner. Only the first cycle starts automatically upon deploy\\n    /// @param termId the id of the term\\n    function startNewCycle(uint termId) external {\\n        LibFund._startNewCycle(termId);\\n    }\\n\\n    /// @notice Must be called at the end of the contribution period after the time has passed by the owner\\n    /// @dev Revert if there is still time to contribute\\n    /// @dev Revert if Fund is not accepting contributions\\n    /// @param termId the id of the term\\n    function closeFundingPeriod(uint termId) external {\\n        LibFundStorage.Fund storage fund = LibFundStorage._fundStorage().funds[termId];\\n        LibTermStorage.Term storage term = LibTermStorage._termStorage().terms[termId];\\n        // Current cycle minus 1 because we use the previous cycle time as start point then  add contribution period\\n        require(\\n            block.timestamp >\\n                term.cycleTime * (fund.currentCycle - 1) + fund.fundStart + term.contributionPeriod,\\n            \\\"TT-FF-01\\\"\\n        );\\n        require(fund.currentState == LibFundStorage.FundStates.AcceptingContributions, \\\"TT-FF-02\\\");\\n\\n        address currentBeneficiary = IGetters(address(this)).getCurrentBeneficiary(termId);\\n\\n        // We attempt to make the autopayers pay their contribution right away\\n        LibFund._autoPay(termId);\\n\\n        // Only then award the beneficiary\\n        LibFund._setState(termId, LibFundStorage.FundStates.AwardingBeneficiary);\\n\\n        // We must check who hasn't paid and default them, check all participants based on beneficiariesOrder\\n        address[] memory participants = fund.beneficiariesOrder;\\n\\n        uint participantsLength = participants.length;\\n        uint currentCycle = fund.currentCycle;\\n        for (uint i; i < participantsLength; ) {\\n            address p = participants[i];\\n\\n            // The current beneficiary or someone who is exempt doesn't pay neither gets defaulted\\n            if (p == currentBeneficiary || fund.isExemptedOnCycle[currentCycle].exempted[p]) {\\n                if (EnumerableSet.contains(fund._defaulters, p)) {\\n                    EnumerableSet.remove(fund._defaulters, p);\\n                    if (p == currentBeneficiary) {\\n                        EnumerableSet.add(fund._beneficiaries, p);\\n                    } else {\\n                        EnumerableSet.add(fund._participants, p);\\n                    }\\n                }\\n\\n                /// @custom:unchecked-block without risks, i can't be higher than beneficiariesOrder length\\n                unchecked {\\n                    ++i;\\n                }\\n                continue;\\n            }\\n\\n            if (fund.paidThisCycle[p]) {\\n                // check where to restore the defaulter to, participants or beneficiaries\\n                if (fund.isBeneficiary[p]) {\\n                    EnumerableSet.add(fund._beneficiaries, p);\\n                } else {\\n                    EnumerableSet.add(fund._participants, p);\\n                }\\n\\n                EnumerableSet.remove(fund._defaulters, p);\\n            } else if (\\n                !EnumerableSet.contains(fund._defaulters, p) &&\\n                !IGetters(address(this)).wasExpelled(termId, p)\\n            ) {\\n                // And we make sure that existing defaulters are ignored\\n                // If the current beneficiary is an expelled participant, only check previous beneficiaries,\\n                // that have not been expelled\\n                if (IGetters(address(this)).wasExpelled(termId, currentBeneficiary)) {\\n                    if (fund.isBeneficiary[p]) {\\n                        _defaultParticipant(termId, p);\\n                    }\\n                } else {\\n                    _defaultParticipant(termId, p);\\n                }\\n            }\\n\\n            /// @custom:unchecked-block without risks, i can't be higher than beneficiariesOrder length\\n            unchecked {\\n                ++i;\\n            }\\n        }\\n\\n        // Once we decided who defaulted and who paid, we can award the beneficiary for this cycle\\n        _awardBeneficiary(fund, term);\\n        if (!(fund.currentCycle < fund.totalAmountOfCycles)) {\\n            // If all cycles have passed, and the last cycle's time has passed, close the fund\\n            _closeFund(termId);\\n            return;\\n        }\\n    }\\n\\n    /// @notice allow the owner to empty the fund if there's any excess fund left after 180 days,\\n    ///         this with the assumption that beneficiaries can't claim it themselves due to losing their keys for example,\\n    ///         and prevent the fund to be stuck in limbo\\n    /// @dev Revert if the caller is not the term owner\\n    /// @dev Revert if the time is not met (180 days)\\n    /// @param termId the id of the term\\n    function emptyFundAfterEnd(uint termId) external onlyOwner {\\n        LibFundStorage.Fund storage fund = LibFundStorage._fundStorage().funds[termId];\\n        require(\\n            fund.currentState == LibFundStorage.FundStates.FundClosed &&\\n                block.timestamp > fund.fundEnd + 180 days,\\n            \\\"TT-FF-03\\\"\\n        );\\n\\n        uint balance;\\n        uint beneficiariesLength = fund.beneficiariesOrder.length;\\n\\n        for (uint i; i < beneficiariesLength; ) {\\n            if (fund.beneficiariesPool[fund.beneficiariesOrder[i]] > 0) {\\n                balance += fund.beneficiariesPool[fund.beneficiariesOrder[i]];\\n                fund.beneficiariesPool[fund.beneficiariesOrder[i]] = 0;\\n            }\\n\\n            /// @custom:unchecked-block without risks, i can't be higher than beneficiariesOrder length\\n            unchecked {\\n                ++i;\\n            }\\n        }\\n\\n        if (balance > 0) {\\n            bool success = fund.stableToken.transfer(msg.sender, balance);\\n            require(success, \\\"TT-FF-04\\\");\\n        }\\n    }\\n\\n    /// @notice function to enable/disable autopay\\n    /// @dev Revert if the user is not a collateral member\\n    /// @dev Revert if the Fund is closed\\n    /// @dev It needs the user to have enough tokens and allow the contract as spender\\n    /// @dev Can be set before the Fund starts\\n    /// @param termId the id of the term\\n    function toggleAutoPay(uint termId) external {\\n        LibCollateralStorage.Collateral storage collateral = LibCollateralStorage\\n            ._collateralStorage()\\n            .collaterals[termId];\\n        LibFundStorage.Fund storage fund = LibFundStorage._fundStorage().funds[termId];\\n        require(collateral.isCollateralMember[msg.sender], \\\"TT-FF-05\\\");\\n        require(fund.currentState != LibFundStorage.FundStates.FundClosed, \\\"TT-FF-02\\\");\\n        bool enabled = !fund.autoPayEnabled[msg.sender];\\n        fund.autoPayEnabled[msg.sender] = enabled;\\n\\n        emit OnAutoPayToggled(termId, msg.sender, enabled);\\n    }\\n\\n    /// @notice This is the function participants call to pay the contribution\\n    /// @param termId the id of the term\\n    function payContribution(uint termId) external {\\n        LibFundStorage.Fund storage fund = LibFundStorage._fundStorage().funds[termId];\\n\\n        bool payNextCycle = _payContributionsChecks(fund, termId, msg.sender);\\n\\n        _payContribution(termId, msg.sender, msg.sender, payNextCycle);\\n    }\\n\\n    /// @notice This function is here to give the possibility to pay using a different wallet\\n    /// @param termId the id of the term\\n    /// @param participant the address the msg.sender is paying for, the address must be part of the fund\\n    function payContributionOnBehalfOf(uint termId, address participant) external {\\n        LibFundStorage.Fund storage fund = LibFundStorage._fundStorage().funds[termId];\\n\\n        bool payNextCycle = _payContributionsChecks(fund, termId, participant);\\n\\n        _payContribution(termId, msg.sender, participant, payNextCycle);\\n    }\\n\\n    /// @notice Called by the beneficiary to withdraw the fund\\n    /// @dev This follows the pull-over-push pattern.\\n    /// @param termId the id of the term\\n    function withdrawFund(uint termId) external {\\n        _withdrawFund(termId, msg.sender);\\n    }\\n\\n    /// @notice Called by the beneficiary to withdraw the fund\\n    /// @dev This follows the pull-over-push pattern.\\n    /// @param termId the id of the term\\n    /// @param receiver the address that will receive the fund\\n    function withdrawFundOnAnotherWallet(uint termId, address receiver) external {\\n        _withdrawFund(termId, receiver);\\n    }\\n\\n    /// @notice Default the participant/beneficiary by checking the mapping first, then remove them from the appropriate array\\n    /// @param _termId The id of the term\\n    /// @param _defaulter The participant to default\\n    function _defaultParticipant(uint _termId, address _defaulter) internal {\\n        LibFundStorage.Fund storage fund = LibFundStorage._fundStorage().funds[_termId];\\n        // Try removing from participants first\\n        bool success = EnumerableSet.remove(fund._participants, _defaulter);\\n\\n        // If that fails, we try removing from beneficiaries\\n        if (!success) {\\n            success = EnumerableSet.remove(fund._beneficiaries, _defaulter);\\n        }\\n\\n        require(success, \\\"TT-FF-06\\\");\\n        EnumerableSet.add(fund._defaulters, _defaulter);\\n\\n        emit OnParticipantDefaulted(_termId, fund.currentCycle, _defaulter);\\n    }\\n\\n    /// @notice The beneficiary will be awarded here based on the beneficiariesOrder array.\\n    /// @notice It will loop through the array and choose the first in line to be eligible to be beneficiary.\\n    /// @param _fund Fund object\\n    /// @param _term Term object\\n    function _awardBeneficiary(\\n        LibFundStorage.Fund storage _fund,\\n        LibTermStorage.Term storage _term\\n    ) internal {\\n        address beneficiary = IGetters(address(this)).getCurrentBeneficiary(_term.termId);\\n\\n        // Request contribution from the collateral for those who have to pay this cycle and haven't paid\\n        if (EnumerableSet.length(_fund._defaulters) > 0) {\\n            address[] memory expellants = ICollateral(address(this)).requestContribution(\\n                _term,\\n                EnumerableSet.values(_fund._defaulters)\\n            );\\n\\n            uint expellantsLength = expellants.length;\\n            for (uint i; i < expellantsLength; ) {\\n                if (expellants[i] == address(0) || expellants[i] == beneficiary) {\\n                    /// @custom:unchecked-block without risks, i can't be higher than expellants length\\n                    unchecked {\\n                        ++i;\\n                    }\\n                    continue;\\n                }\\n                _expelDefaulter(_fund, _term, expellants[i]);\\n\\n                /// @custom:unchecked-block without risks, i can't be higher than expellants length\\n                unchecked {\\n                    ++i;\\n                }\\n            }\\n        }\\n\\n        // Remove participant from participants set..\\n        if (EnumerableSet.remove(_fund._participants, beneficiary)) {\\n            // ..Then add them to the benificiaries set\\n            EnumerableSet.add(_fund._beneficiaries, beneficiary);\\n        }\\n\\n        // Update the mapping to track who's been beneficiary\\n        _fund.isBeneficiary[beneficiary] = true;\\n\\n        // Get the amount of participants that paid this cycle, and add that amount to the beneficiary's pool\\n        uint paidCount;\\n        address[] memory participants = _fund.beneficiariesOrder; // Use beneficiariesOrder here because it contains all active participants in a single array\\n        uint participantsLength = participants.length;\\n        for (uint i; i < participantsLength; ) {\\n            if (_fund.paidThisCycle[participants[i]]) {\\n                paidCount++;\\n            }\\n\\n            /// @custom:unchecked-block without risks, i can't be higher than beneficiariesOrder length\\n            unchecked {\\n                ++i;\\n            }\\n        }\\n\\n        // Award the beneficiary with the pool or freeze the pot\\n        _freezePot(_term, _fund, beneficiary);\\n\\n        _fund.beneficiariesPool[beneficiary] += _term.contributionAmount * paidCount * 10 ** 6; // Six decimals\\n\\n        emit OnBeneficiaryAwarded(_term.termId, beneficiary);\\n        LibFund._setState(_term.termId, LibFundStorage.FundStates.CycleOngoing);\\n    }\\n\\n    /// @notice Internal function for close fund which is used by _startNewCycle & _chooseBeneficiary to cover some edge-cases\\n    /// @param _termId The id of the term\\n    function _closeFund(uint _termId) internal {\\n        LibFundStorage.Fund storage fund = LibFundStorage._fundStorage().funds[_termId];\\n        LibTermStorage.Term storage term = LibTermStorage._termStorage().terms[_termId];\\n        fund.fundEnd = block.timestamp;\\n        term.state = LibTermStorage.TermStates.ClosedTerm;\\n        LibFund._setState(_termId, LibFundStorage.FundStates.FundClosed);\\n        ICollateral(address(this)).releaseCollateral(_termId);\\n    }\\n\\n    /// @notice function to pay the actual contribution for the cycle\\n    /// @param _termId the id of the term\\n    /// @param _payer the address that's paying\\n    /// @param _participant the (participant) address that's being paid for\\n    /// @param _payNextCycle whether to pay for the next cycle or not\\n    function _payContribution(\\n        uint _termId,\\n        address _payer,\\n        address _participant,\\n        bool _payNextCycle\\n    ) internal {\\n        LibFundStorage.Fund storage fund = LibFundStorage._fundStorage().funds[_termId];\\n        LibTermStorage.Term storage term = LibTermStorage._termStorage().terms[_termId];\\n\\n        // Get the amount and do the actual transfer\\n        // This will only succeed if the sender approved this contract address beforehand\\n        uint amount = term.contributionAmount * 10 ** 6; // Deducted from user's wallet, six decimals\\n\\n        bool success = fund.stableToken.transferFrom(_payer, address(this), amount);\\n        require(success, \\\"TT-FF-07\\\");\\n\\n        // Finish up, set that the participant paid for this cycle and emit an event that it's been done\\n        if (!_payNextCycle) {\\n            fund.paidThisCycle[_participant] = true;\\n            emit OnPaidContribution(_termId, _participant, fund.currentCycle);\\n        } else {\\n            fund.paidNextCycle[_participant] = true;\\n            emit OnPaidContribution(_termId, _participant, fund.currentCycle + 1);\\n        }\\n    }\\n\\n    /// @param _termId term Id\\n    /// @param _receiver address that will receive the money pot\\n    /// @dev Revert if Fund is closed\\n    /// @dev Revert if the user have not been a beneficiary\\n    /// @dev Revert if the user is not a participant\\n    /// @dev Revert if there is nothing to withdraw\\n    /// @dev Revert if the money pot is frozen\\n    function _withdrawFund(uint _termId, address _receiver) internal {\\n        LibFundStorage.Fund storage fund = LibFundStorage._fundStorage().funds[_termId];\\n        LibCollateralStorage.Collateral storage collateral = LibCollateralStorage\\n            ._collateralStorage()\\n            .collaterals[_termId];\\n        // To withdraw the fund, the fund must be closed or the participant must be a beneficiary on\\n        // any of the past cycles.\\n\\n        bool expelledBeforeBeneficiary = fund.expelledBeforeBeneficiary[msg.sender];\\n\\n        require(\\n            fund.currentState == LibFundStorage.FundStates.FundClosed ||\\n                fund.isBeneficiary[msg.sender] ||\\n                expelledBeforeBeneficiary,\\n            \\\"TT-FF-08\\\"\\n        );\\n\\n        bool hasFundPool = fund.beneficiariesPool[msg.sender] > 0;\\n        bool hasFrozenPool = fund.beneficiariesFrozenPool[msg.sender];\\n        bool hasCollateralPool = collateral.collateralPaymentBank[msg.sender] > 0;\\n\\n        require(hasFundPool || hasFrozenPool || hasCollateralPool, \\\"TT-FF-09\\\");\\n\\n        if (hasFrozenPool) {\\n            bool freeze = _freezePot(\\n                LibTermStorage._termStorage().terms[_termId],\\n                fund,\\n                msg.sender\\n            );\\n\\n            if (fund.currentState != LibFundStorage.FundStates.FundClosed) {\\n                require(!freeze, \\\"TT-FF-10\\\");\\n            }\\n\\n            _transferPoolToBeneficiary(_termId, msg.sender, _receiver);\\n        } else if (hasFundPool) {\\n            _transferPoolToBeneficiary(_termId, msg.sender, _receiver);\\n        }\\n\\n        if (hasCollateralPool) {\\n            LibCollateral._withdrawReimbursement(_termId, msg.sender, _receiver);\\n        }\\n    }\\n\\n    /// @notice called internally to expel a participant. It should not be possible to expel non-defaulters, so those arrays are not checked.\\n    /// @param _fund Fund object\\n    /// @param _term Term object\\n    /// @param _expellant The address of the defaulter that will be expelled\\n    function _expelDefaulter(\\n        LibFundStorage.Fund storage _fund,\\n        LibTermStorage.Term storage _term,\\n        address _expellant\\n    ) internal {\\n        // Expellants should only be in the defauters set so no need to touch the other sets\\n        require(\\n            _fund.isParticipant[_expellant] && EnumerableSet.remove(_fund._defaulters, _expellant),\\n            \\\"TT-FF-11\\\"\\n        );\\n\\n        LibCollateralStorage.Collateral storage collateral = LibCollateralStorage\\n            ._collateralStorage()\\n            .collaterals[_term.termId];\\n\\n        _fund.isParticipant[_expellant] = false;\\n        collateral.isCollateralMember[_expellant] = false;\\n        // If the expellant has not been a beneficiary before, mark them as expelledBeforeBeneficiary\\n        if (!_fund.isBeneficiary[_expellant]) {\\n            _fund.expelledBeforeBeneficiary[_expellant] = true;\\n        }\\n\\n        // Lastly, lower the amount of participants\\n        --_term.totalParticipants;\\n        ++_fund.expelledParticipants;\\n\\n        emit OnDefaulterExpelled(_term.termId, _fund.currentCycle, _expellant);\\n    }\\n\\n    /// @notice Internal function to transfer the pool to the beneficiary\\n    /// @dev Revert if the contract does not have enough funds\\n    /// @param _termId The id of the term\\n    /// @param _participant address\\n    /// @param _receiver address\\n    function _transferPoolToBeneficiary(\\n        uint _termId,\\n        address _participant,\\n        address _receiver\\n    ) internal {\\n        LibFundStorage.Fund storage fund = LibFundStorage._fundStorage().funds[_termId];\\n\\n        // Get the amount this beneficiary can withdraw\\n        uint transferAmount = fund.beneficiariesPool[_participant];\\n        uint contractBalance = fund.stableToken.balanceOf(address(this));\\n        if (contractBalance < transferAmount) {\\n            revert InsufficientBalance({available: contractBalance, required: transferAmount});\\n        } else {\\n            fund.beneficiariesPool[_participant] = 0;\\n            bool success = fund.stableToken.transfer(_receiver, transferAmount);\\n            require(success, \\\"TT-FF-04\\\");\\n        }\\n        emit OnFundWithdrawn(_termId, _participant, _receiver, transferAmount);\\n    }\\n\\n    /// @notice Internal function to freeze the pot for the beneficiary\\n    /// @dev Users remaining collateral must be at least 1.1 times remaining cycles contributions\\n    /// @param _term Term object\\n    /// @param _fund Fund object\\n    /// @param _user address\\n    function _freezePot(\\n        LibTermStorage.Term memory _term,\\n        LibFundStorage.Fund storage _fund,\\n        address _user\\n    ) internal returns (bool) {\\n        LibCollateralStorage.Collateral storage collateral = LibCollateralStorage\\n            ._collateralStorage()\\n            .collaterals[_term.termId];\\n\\n        bool expelledBeforeBeneficiary = _fund.expelledBeforeBeneficiary[_user];\\n\\n        if (expelledBeforeBeneficiary) {\\n            _fund.beneficiariesFrozenPool[_user] = false;\\n        } else {\\n            uint remainingCyclesContribution = IGetters(address(this))\\n                .getRemainingCyclesContributionWei(_term.termId);\\n\\n            uint neededCollateral = (110 * remainingCyclesContribution) / 100; // 1.1 x RCC\\n\\n            if (collateral.collateralMembersBank[_user] < neededCollateral) {\\n                _fund.beneficiariesFrozenPool[_user] = true;\\n            } else {\\n                _fund.beneficiariesFrozenPool[_user] = false;\\n            }\\n        }\\n        return _fund.beneficiariesFrozenPool[_user];\\n    }\\n\\n    /// @param _fund Fund object\\n    /// @param _termId term Id\\n    /// @param _participant address\\n    /// @dev Revert if the fund is Closed or initializing\\n    /// @dev Revert if the caller is not a participant, is exempted, is the beneficiary or has already paid\\n    function _payContributionsChecks(\\n        LibFundStorage.Fund storage _fund,\\n        uint _termId,\\n        address _participant\\n    ) internal view returns (bool _payNextCycle) {\\n        require(\\n            _fund.currentState == LibFundStorage.FundStates.AcceptingContributions ||\\n                _fund.currentState == LibFundStorage.FundStates.CycleOngoing,\\n            \\\"TT-FF-02\\\"\\n        );\\n        require(_fund.isParticipant[_participant], \\\"TT-FF-12\\\");\\n\\n        address _beneficiary;\\n        uint _cycle;\\n\\n        if (_fund.currentState == LibFundStorage.FundStates.AcceptingContributions) {\\n            require(!_fund.paidThisCycle[_participant], \\\"TT-FF-13\\\");\\n\\n            _cycle = _fund.currentCycle;\\n            _beneficiary = IGetters(address(this)).getCurrentBeneficiary(_termId);\\n            _payNextCycle = false;\\n        } else {\\n            require(!_fund.paidNextCycle[_participant], \\\"TT-FF-13\\\");\\n\\n            _cycle = _fund.currentCycle + 1;\\n            _beneficiary = IGetters(address(this)).getNextBeneficiary(_termId);\\n            _payNextCycle = true;\\n        }\\n\\n        require(_beneficiary != _participant, \\\"TT-FF-14\\\");\\n        require(!_fund.isExemptedOnCycle[_cycle].exempted[_participant], \\\"TT-FF-15\\\");\\n    }\\n}\\n\",\"keccak256\":\"0xfff53eb6c8478598df4588b84755c38bb5845f855518cf0b5aac7fc2c010c6d9\",\"license\":\"GPL-3.0\"},\"contracts/interfaces/ICollateral.sol\":{\"content\":\"// SPDX-License-Identifier: GPL-3.0\\n\\npragma solidity 0.8.18;\\n\\n/// @title Takaturn Collateral Interface\\n/// @author Aisha EL Allam\\n/// @notice This is used to allow fund to easily communicate with collateral\\n/// @dev v2.0 (post-deploy)\\n\\nimport {LibCollateralStorage} from \\\"../libraries/LibCollateralStorage.sol\\\";\\nimport {LibTermStorage} from \\\"../libraries/LibTermStorage.sol\\\";\\n\\ninterface ICollateral {\\n    /// @notice Called from Fund contract when someone defaults\\n    /// @dev Check EnumerableMap (openzeppelin) for arrays that are being accessed from Fund contract\\n    /// @dev Revert if the caller is not the Diamond proxy\\n    /// @param term Term object\\n    /// @param defaulters Addressess of all defaulters of the current cycle\\n    /// @return expellants array of addresses that were expelled\\n    function requestContribution(\\n        LibTermStorage.Term memory term,\\n        address[] calldata defaulters\\n    ) external returns (address[] memory);\\n\\n    /// @notice Called by each member after during or at the end of the term to withraw collateral\\n    /// @dev This follows the pull-over-push pattern.\\n    /// @param termId term id\\n    function withdrawCollateral(uint termId) external;\\n\\n    /// @notice Called by each member after during or at the end of the term to withraw collateral to a different address than the caller\\n    /// @dev This follows the pull-over-push pattern.\\n    /// @dev Revert if the caller is not a participant\\n    /// @param termId term id\\n    /// @param receiver receiver address\\n    function withdrawCollateralToAnotherAddress(uint termId, address receiver) external;\\n\\n    /// @notice Allows to withdraw all collateral from the at the term's end\\n    /// @dev Does not withdraw anything, just set the state for users to withdraw\\n    /// @dev Revert if the fund is not closed\\n    /// @param termId term id\\n    function releaseCollateral(uint termId) external;\\n\\n    /// @notice allow the owner to empty the Collateral after 180 days\\n    /// @dev Revert if the collateral is not at releasing collateral\\n    /// @dev Revert if the caller is not the term owner\\n    /// @dev Revert if the time is not met\\n    /// @param termId The term id\\n    function emptyCollateralAfterEnd(uint termId) external;\\n}\\n\",\"keccak256\":\"0xa0f23aa069bc6341e9823dfd8ee5f16fd4b9883c7d3a7bf1d9a60dba71f7442f\",\"license\":\"GPL-3.0\"},\"contracts/interfaces/IFund.sol\":{\"content\":\"// SPDX-License-Identifier: GPL-3.0\\n\\npragma solidity 0.8.18;\\n\\n/// @title Takaturn Fund Interface\\n/// @author Mohammed Haddouti\\n/// @notice This is used to allow collateral to easily communicate with fund\\n/// @dev v2.0 (post-deploy)\\n\\nimport {LibFund} from \\\"../libraries/LibFund.sol\\\";\\n\\ninterface IFund {\\n    /// @notice starts a new cycle manually called by the owner. Only the first cycle starts automatically upon deploy\\n    /// @param termId the id of the term\\n    function startNewCycle(uint termId) external;\\n\\n    /// @notice Must be called at the end of the contribution period after the time has passed by the owner\\n    /// @dev Revert if still time to contribute\\n    /// @dev Revert if Fund is not accepting contributions\\n    /// @param termId the id of the term\\n    function closeFundingPeriod(uint termId) external;\\n\\n    /// @notice allow the owner to empty the fund if there's any excess fund left after 180 days,\\n    ///         this with the assumption that beneficiaries can't claim it themselves due to losing their keys for example,\\n    ///         and prevent the fund to be stuck in limbo\\n    /// @dev Revert if the caller is not the term owner\\n    /// @dev Revert if the time is not met (180 days)\\n    /// @param termId the id of the term\\n    function emptyFundAfterEnd(uint termId) external;\\n\\n    /// @notice function to enable/disable autopay\\n    /// @dev Revert if the user is not a collateral member\\n    /// @dev Revert if the Fund is closed\\n    /// @dev It needs the user to have enough tokens and allow the contract as spender\\n    /// @dev Can be set before the Fund starts\\n    /// @param termId the id of the term\\n    function toggleAutoPay(uint termId) external;\\n\\n    /// @notice This is the function participants call to pay the contribution\\n    /// @param termId the id of the term\\n    function payContribution(uint termId) external;\\n\\n    /// @notice This function is here to give the possibility to pay using a different wallet\\n    /// @param termId the id of the term\\n    /// @param participant the address the msg.sender is paying for, the address must be part of the fund\\n    function payContributionOnBehalfOf(uint termId, address participant) external;\\n\\n    /// @notice Called by the beneficiary to withdraw the fund\\n    /// @dev This follows the pull-over-push pattern.\\n    /// @param termId the id of the term\\n    function withdrawFund(uint termId) external;\\n\\n    /// @notice Called by the beneficiary to withdraw the fund\\n    /// @dev This follows the pull-over-push pattern.\\n    /// @param termId the id of the term\\n    /// @param receiver the address that will receive the fund\\n    function withdrawFundOnAnotherWallet(uint termId, address receiver) external;\\n}\\n\",\"keccak256\":\"0x08fc03a030215f00afa7aa894aed9543b5c32c58412fa74a923e43cd9f7e6e07\",\"license\":\"GPL-3.0\"},\"contracts/interfaces/IGetters.sol\":{\"content\":\"// SPDX-License-Identifier: GPL-3.0\\n\\npragma solidity 0.8.18;\\n\\nimport {IERC20} from \\\"@openzeppelin/contracts/token/ERC20/IERC20.sol\\\";\\n\\nimport {LibTermStorage} from \\\"../libraries/LibTermStorage.sol\\\";\\nimport {LibCollateralStorage} from \\\"../libraries/LibCollateralStorage.sol\\\";\\nimport {LibFundStorage} from \\\"../libraries/LibFundStorage.sol\\\";\\nimport {LibGettersHelpers} from \\\"../libraries/LibGettersHelpers.sol\\\";\\n\\ninterface IGetters {\\n    /// @notice This function is used as a helper for front-end implementation\\n    /// @param termId The term id for which the summary is being requested\\n    /// @return term The term object\\n    /// @return collateralState The current state of the collateral\\n    /// @return fundState The current state of the fund\\n    /// @return nonUserRelated A helper struct with the following values:\\n    ///                        available positions, security deposits corresponding to each position,\\n    ///                        remaining registration time, remaining contribution time,\\n    ///                        remaining cycle time, remaining cycles, remaining cycles\\n    ///                        contribution in wei, latest price from Chainlink, collateral\\n    ///                        first deposit time in seconds, collateral counter members,\\n    ///                        fund start time in seconds, fund end time in seconds, current\\n    ///                        cycle, expelled participants, total amount of cycles, yield\\n    ///                        start time in seconds, total deposit in wei, current total\\n    ///                        deposit in wei, total shares\\n    function getTermRelatedSummary(\\n        uint termId\\n    )\\n        external\\n        view\\n        returns (\\n            LibTermStorage.Term memory term,\\n            LibCollateralStorage.CollateralStates collateralState,\\n            LibFundStorage.FundStates fundState,\\n            LibGettersHelpers.NonUserRelated memory nonUserRelated\\n        );\\n\\n    /// @notice This function is used as a helper for front-end implementation\\n    /// @param user the depositor address\\n    /// @param termId the collateral id\\n    /// @return userRelated an object that contains the following values:\\n    ///                     user is collateral member, user is undercollaterized,\\n    ///                     current collateral balance, received collateral from defaults,\\n    ///                     initial deposited collateral, collateral expulsion limit,\\n    ///                     currently withdrawable balance, is fund member, is or was beneficiary,\\n    ///                     user paid current cycle, user paid next cycle in advance,\\n    ///                     user enabled autopay, user's money pot is frozen, user is exempted this\\n    ///                     cycle, the money pot pool the user can withdraw, the cycle the user got\\n    ///                     expelled (if applicable), is yield member, amount of collateral deposited\\n    ///                     in yield pool, amount of collateral withdrawn from yield pool, available\\n    ///                     yield to withdraw, amount of yield withdrawn, yield to be distributed\\n    function getUserRelatedSummary(\\n        address user,\\n        uint termId\\n    ) external view returns (LibGettersHelpers.UserRelated memory userRelated);\\n\\n    /// @notice This function return the current constant values for oracles and yield providers\\n    /// @param firstAggregator The name of the first aggregator. Example: \\\"ETH/USD\\\"\\n    /// @param secondAggregator The name of the second aggregator. Example: \\\"USDC/USD\\\"\\n    /// @param zapAddress The name of the zap address. Example: \\\"ZaynZap\\\"\\n    /// @param vaultAddress The name of the vault address. Example: \\\"ZaynVault\\\"\\n    /// @return The addresses of the oracles and yield providers\\n    function getConstants(\\n        string memory firstAggregator,\\n        string memory secondAggregator,\\n        string memory zapAddress,\\n        string memory vaultAddress\\n    ) external view returns (address, address, address, address);\\n\\n    /// @notice This function is used to get the current state of the yield lock\\n    /// @return The current state of the yield lock\\n    function getYieldLockState() external view returns (bool);\\n\\n    /// @return the current term id\\n    /// @return the next term id\\n    function getTermsId() external view returns (uint, uint);\\n\\n    /// @notice Gets the term object\\n    /// @param termId the term id\\n    /// @return the term object\\n    function getTermSummary(uint termId) external view returns (LibTermStorage.Term memory);\\n\\n    /// @notice Gets the collateral summary of a term\\n    /// @param termId the id of the term\\n    /// @return if collateral is initialized\\n    /// @return current state of the collateral, see States struct in LibCollateralStorage.sol\\n    /// @return time of first deposit in seconds, 0 if no deposit occured yet\\n    /// @return current member count\\n    /// @return list of depositors\\n    function getCollateralSummary(\\n        uint termId\\n    )\\n        external\\n        view\\n        returns (bool, LibCollateralStorage.CollateralStates, uint, uint, address[] memory);\\n\\n    /// @notice Gets the fund summary of a term\\n    /// @param termId the id of the term\\n    /// @return if fund is initialized\\n    /// @return current state of the fund, see States struct in LibFund.sol\\n    /// @return stablecoin address used\\n    /// @return list for order of beneficiaries\\n    /// @return when the fund started in seconds\\n    /// @return when the fund ended in seconds, 0 otherwise\\n    /// @return current cycle of fund\\n    /// @return total amount of cycles in this fund/term\\n    function getFundSummary(\\n        uint termId\\n    )\\n        external\\n        view\\n        returns (bool, LibFundStorage.FundStates, IERC20, address[] memory, uint, uint, uint, uint);\\n\\n    /// @notice Gets the yield object\\n    /// @param termId the collateral id\\n    /// @return if the yield is initialized\\n    /// @return start time stamp for yield deposit\\n    /// @return total deposit\\n    /// @return current amount in yield\\n    /// @return amount of total shares\\n    /// @return list of yield users\\n    /// @return address of vault\\n    /// @return address of zap\\n    function getYieldSummary(\\n        uint termId\\n    ) external view returns (bool, uint, uint, uint, uint, address[] memory, address, address);\\n\\n    /// @notice This function is used to get a term APY\\n    /// @param termId The term id for which the APY is being calculated\\n    /// @return The APY for the term\\n    function termAPY(uint termId) external view returns (uint256);\\n\\n    /// @notice a function to get the needed allowance\\n    /// @param user the user address\\n    /// @return the needed allowance\\n    function getNeededAllowance(address user) external view returns (uint);\\n\\n    /// @notice function to get the beneficiary from the current cycle\\n    /// @param termId the fund id\\n    /// @return the current beneficiary\\n    function getCurrentBeneficiary(uint termId) external view returns (address);\\n\\n    /// @notice Gets the next beneficiary of a term\\n    /// @param termId the id of the term\\n    /// @return user address\\n    function getNextBeneficiary(uint termId) external view returns (address);\\n\\n    /// @notice Gets a users collateral summary\\n    /// @param depositor address\\n    /// @param termId the id of the term\\n    /// @return if the user is a true member of the term\\n    /// @return current users locked collateral balance in wei\\n    /// @return current users unlocked collateral balance in wei\\n    /// @return initial users deposit in wei\\n    /// @return expulsion limit\\n    function getDepositorCollateralSummary(\\n        address depositor,\\n        uint termId\\n    ) external view returns (bool, uint, uint, uint, uint);\\n\\n    /// @notice function to get fund information of a specific participant\\n    /// @param participant the user to get the info from\\n    /// @param termId the fund id\\n    /// @return isParticipant, true if is participant\\n    /// @return isBeneficiary, true if has been beneficiary\\n    /// @return paidThisCycle, true if has paid the current cycle\\n    /// @return autoPayEnabled, true if auto pay is enabled\\n    /// @return beneficiariesPool, the beneficiary pool, 6 decimals\\n    /// @return beneficiariesFrozenPool, true if the beneficiary pool is frozen\\n    function getParticipantFundSummary(\\n        address participant,\\n        uint termId\\n    ) external view returns (bool, bool, bool, bool, uint, bool);\\n\\n    /// @notice Gets the user yield summary\\n    /// @param user the depositor address\\n    /// @param termId the collateral id\\n    /// @return if the user opted in for yield\\n    /// @return amount withdrawn from yield\\n    /// @return amount withdrawn from collateral\\n    /// @return amount available in yield\\n    /// @return amount deposited by user in yield\\n    /// @return amount of yield distributed\\n    function getUserYieldSummary(\\n        address user,\\n        uint termId\\n    ) external view returns (bool, uint, uint, uint, uint, uint);\\n\\n    /// @notice function to get cycle information of a specific participant\\n    /// @param participant the user to get the info from\\n    /// @param termId the fund id\\n    /// @return on participant set\\n    /// @return on beneficiary set\\n    /// @return on defaulter set\\n    function getUserSet(address participant, uint termId) external view returns (bool, bool, bool);\\n\\n    /// @notice Called to check how much collateral a user can withdraw\\n    /// @param termId term id\\n    /// @param user depositor address\\n    /// @return allowedWithdrawal amount the amount of collateral the depositor can withdraw\\n    function getWithdrawableUserBalance(\\n        uint termId,\\n        address user\\n    ) external view returns (uint allowedWithdrawal);\\n\\n    /// @notice Get all the terms a participant was expelled from\\n    /// @param participant the participant address\\n    /// @return an array the term ids on which the participant was expelled\\n    function getExpelledTerms(address participant) external view returns (uint[] memory);\\n\\n    /// @notice Checks if a user has a collateral below 1.0x of total contribution amount\\n    /// @dev This will revert if called during ReleasingCollateral or after\\n    /// @param termId The term id\\n    /// @param member The user to check for\\n    /// @return Bool check if member is below 1.0x of collateralDeposit\\n    function isUnderCollaterized(uint termId, address member) external view returns (bool);\\n\\n    /// @notice Gets if a user is exempted from paying for a specefic cycle\\n    /// @param termId the id of the term\\n    /// @param cycle number\\n    /// @param user address\\n    /// @return true or false\\n    function isExempted(uint termId, uint cycle, address user) external view returns (bool);\\n\\n    /// @notice This function is used to check if a user has opted in for yield generation\\n    /// @param termId The term id for which the check is being made\\n    /// @param user The user for which the check is being made\\n    /// @return True if the user has opted in\\n    function userHasoptedInYG(uint termId, address user) external view returns (bool);\\n\\n    /// @notice This function is used to get a user APY\\n    /// @param termId The term id for which the APY is being calculated\\n    /// @param user The user for which the APY is being calculated\\n    /// @return The APY for the user\\n    function userAPY(uint termId, address user) external view returns (uint256);\\n\\n    /// @notice function to get fund information of a specific participant\\n    /// @param participant the user to get the info from\\n    /// @param termId the fund id\\n    /// @return paidThisCycle, true if has paid the current cycle\\n    /// @return paidNextCycle, true if has paid the next cycle\\n    function currentOrNextCyclePaid(\\n        address participant,\\n        uint termId\\n    ) external view returns (bool, bool);\\n\\n    /// @param termId the id of the term\\n    /// @param beneficiary the address of the participant to check\\n    /// @return true if the participant is a beneficiary\\n    function isBeneficiary(uint termId, address beneficiary) external view returns (bool);\\n\\n    /// @notice Gets if a user is expelled from a specefic term\\n    /// @param termId the id of the term\\n    /// @param user address\\n    /// @return true or false\\n    function wasExpelled(uint termId, address user) external view returns (bool);\\n\\n    /// @notice checks if a participant have been expelled before being a beneficiary\\n    /// @param termId the id of the term\\n    /// @param user the address of the participant to check\\n    /// @return true if the participant is expelled before being a beneficiary\\n    function expelledBeforeBeneficiary(uint termId, address user) external view returns (bool);\\n\\n    /// @notice Gets the conversion rate of an amount in ETH to USD\\n    /// @param ethAmount The amount in ETH\\n    /// @return uint converted amount in USD correct to 18 decimals\\n    function getToStableConversionRate(uint ethAmount) external view returns (uint);\\n\\n    /// @notice Gets all remaining cycles of a term\\n    /// @param termId the id of the term\\n    /// @return remaining cycles\\n    function getRemainingCycles(uint termId) external view returns (uint);\\n\\n    /// @notice Gets the expected remaining contribution amount for users in a term\\n    /// @param termId the id of the term\\n    /// @return total remaining contribution in wei\\n    function getRemainingCyclesContributionWei(uint termId) external view returns (uint);\\n\\n    /// @notice Called to check the minimum collateral amount to deposit in wei\\n    /// @param termId term id\\n    /// @param depositorIndex the index the depositor wants to join\\n    /// @return amount the minimum collateral amount to deposit in wei\\n    /// @dev The minimum collateral amount is calculated based on the index on the depositors array\\n    /// @dev The return value should be the minimum msg.value when calling joinTerm\\n    /// @dev C = 1.5 Cp (Tp - I) where C = minimum collateral amount, Cp = contribution amount,\\n    ///      Tp = total participants, I = depositor index (starts at 0). 1.5\\n    function minCollateralToDeposit(uint termId, uint depositorIndex) external view returns (uint);\\n\\n    /// @notice Gets latest ETH / USD price\\n    /// @dev Revert if there is problem with chainlink data\\n    /// @return uint latest price in Wei Note: 18 decimals\\n    function getLatestPrice() external view returns (uint);\\n\\n    /// @notice Gets the conversion rate of an amount in USD to ETH\\n    /// @param USDAmount The amount in USD with 18 decimals\\n    /// @return uint converted amount in wei\\n    function getToCollateralConversionRate(uint USDAmount) external view returns (uint);\\n\\n    /// @notice This function is used to get the total yield generated for a term\\n    /// @param termId The term id for which the yield is being calculated\\n    /// @return The total yield generated for the term\\n    function totalYieldGenerated(uint termId) external view returns (uint);\\n\\n    /// @notice Get all the terms a participant is part of\\n    /// @param participant the participant address\\n    /// @return an array with the term ids the participant is part of\\n    function getAllJoinedTerms(address participant) external view returns (uint[] memory);\\n\\n    /// @notice Get all the terms a participant is part of by a given state\\n    /// @param participant the participant address\\n    /// @param state the term state\\n    /// @return an array with the term ids the participant is part of, giving the state of the term\\n    function getJoinedTermsByState(\\n        address participant,\\n        LibTermStorage.TermStates state\\n    ) external view returns (uint[] memory);\\n\\n    /// @notice Gets the remaining positions in a term and the corresponding security amount\\n    /// @param termId the term id\\n    /// @dev Available positions starts at 0\\n    /// @return availablePositions an array with the available positions\\n    /// @return securityAmount an array with the security amount for each available position\\n    function getAvailablePositionsAndSecurityAmount(\\n        uint termId\\n    ) external view returns (uint[] memory, uint[] memory);\\n\\n    /// @notice Gets the remaining registration period for a term\\n    /// @dev Revert if nobody have deposited\\n    /// @param termId the term id\\n    /// @return remaining contribution period\\n    function getRemainingRegistrationTime(uint termId) external view returns (uint);\\n\\n    /// @notice Must return 0 before closing a contribution period\\n    /// @param termId the id of the term\\n    /// @return remaining contribution time in seconds\\n    function getRemainingContributionTime(uint termId) external view returns (uint);\\n\\n    /// @notice Must be 0 before starting a new cycle\\n    /// @param termId the id of the term\\n    /// @return remaining cycle time in seconds\\n    function getRemainingCycleTime(uint termId) external view returns (uint);\\n}\\n\",\"keccak256\":\"0x5c5f03636df84a0e7481e43052a508c645e4f9e1b0a70639e361068993f0f38c\",\"license\":\"GPL-3.0\"},\"contracts/libraries/LibCollateral.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity 0.8.18;\\n\\nimport {IGetters} from \\\"../interfaces/IGetters.sol\\\";\\n\\nimport {LibCollateralStorage} from \\\"./LibCollateralStorage.sol\\\";\\nimport {LibFundStorage} from \\\"./LibFundStorage.sol\\\";\\n\\nlibrary LibCollateral {\\n    event OnCollateralStateChanged(\\n        uint indexed termId,\\n        LibCollateralStorage.CollateralStates indexed oldState,\\n        LibCollateralStorage.CollateralStates indexed newState\\n    ); // Emits when the state of the collateral changes\\n    event OnReimbursementWithdrawn(\\n        uint indexed termId,\\n        address indexed participant,\\n        address receiver,\\n        uint indexed amount\\n    ); // Emits when a participant withdraws their reimbursement\\n\\n    /// @notice Sets the state of the collateral\\n    /// @param _termId term id\\n    /// @param _newState collateral state\\n    function _setState(uint _termId, LibCollateralStorage.CollateralStates _newState) internal {\\n        LibCollateralStorage.Collateral storage collateral = LibCollateralStorage\\n            ._collateralStorage()\\n            .collaterals[_termId];\\n        LibCollateralStorage.CollateralStates oldState = collateral.state;\\n        collateral.state = _newState;\\n        emit OnCollateralStateChanged(_termId, oldState, _newState);\\n    }\\n\\n    /// @notice Allow a user to withdraw their reimbursement\\n    /// @dev Reverts if the fund does not exists or if the user has nothing to claim\\n    /// @param _termId term id\\n    /// @param _participant Address of the depositor\\n    /// @param _receiver Address of the receiver\\n    function _withdrawReimbursement(\\n        uint _termId,\\n        address _participant,\\n        address _receiver\\n    ) internal {\\n        require(LibFundStorage._fundExists(_termId), \\\"TT-LC-01\\\");\\n        LibCollateralStorage.Collateral storage collateral = LibCollateralStorage\\n            ._collateralStorage()\\n            .collaterals[_termId];\\n\\n        uint amount = collateral.collateralPaymentBank[_participant];\\n        require(amount > 0, \\\"TT-LC-02\\\");\\n        collateral.collateralPaymentBank[_participant] = 0;\\n\\n        (bool success, ) = payable(_receiver).call{value: amount}(\\\"\\\");\\n        require(success);\\n\\n        emit OnReimbursementWithdrawn(_termId, _participant, _receiver, amount);\\n    }\\n\\n    /// @notice Checks if a user has a collateral below 1.0x of total contribution amount\\n    /// @dev This will revert if called during ReleasingCollateral or after\\n    /// @param _termId The fund id\\n    /// @param _member The user to check for\\n    /// @return Bool check if member is below 1.0x of collateralDeposit\\n    function _isUnderCollaterized(uint _termId, address _member) internal view returns (bool) {\\n        LibCollateralStorage.Collateral storage collateral = LibCollateralStorage\\n            ._collateralStorage()\\n            .collaterals[_termId];\\n\\n        uint collateralLimit;\\n        uint memberCollateral = collateral.collateralMembersBank[_member];\\n\\n        if (!LibFundStorage._fundExists(_termId)) {\\n            // Only check here when starting the term\\n            (, , , , collateralLimit) = IGetters(address(this)).getDepositorCollateralSummary(\\n                _member,\\n                _termId\\n            );\\n        } else {\\n            collateralLimit = IGetters(address(this)).getRemainingCyclesContributionWei(_termId);\\n        }\\n\\n        return (memberCollateral < collateralLimit);\\n    }\\n}\\n\",\"keccak256\":\"0xf01d58df0cd05ab82e84f093e533f97eb8367ae13a490764e1335f5dccb01044\",\"license\":\"MIT\"},\"contracts/libraries/LibCollateralStorage.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity 0.8.18;\\n\\nlibrary LibCollateralStorage {\\n    bytes32 constant COLLATERAL_STORAGE_POSITION = keccak256(\\\"diamond.standard.collateral.storage\\\");\\n\\n    enum CollateralStates {\\n        AcceptingCollateral, // Initial state where collateral are deposited\\n        CycleOngoing, // Triggered when a fund instance is created, no collateral can be accepted\\n        ReleasingCollateral, // Triggered when the fund closes\\n        Closed // Triggered when all depositors withdraw their collaterals\\n    }\\n\\n    struct DefaulterState {\\n        bool payWithCollateral;\\n        bool payWithFrozenPool;\\n        bool gettingExpelled;\\n        bool isBeneficiary;\\n    }\\n\\n    struct Collateral {\\n        bool initialized;\\n        CollateralStates state;\\n        uint firstDepositTime; // Time when the first deposit was made in seconds\\n        uint counterMembers;\\n        address[] depositors;\\n        mapping(address => bool) isCollateralMember; // Determines if a depositor is a valid user\\n        mapping(address => uint) collateralMembersBank; // Users main balance\\n        mapping(address => uint) collateralPaymentBank; // Users reimbursement balance after someone defaults\\n        mapping(address => uint) collateralDepositByUser; // Depends on the depositors index\\n    }\\n\\n    struct CollateralStorage {\\n        mapping(uint => Collateral) collaterals; // termId => Collateral struct\\n    }\\n\\n    function _collateralExists(uint termId) internal view returns (bool) {\\n        return _collateralStorage().collaterals[termId].initialized;\\n    }\\n\\n    function _collateralStorage()\\n        internal\\n        pure\\n        returns (CollateralStorage storage collateralStorage)\\n    {\\n        bytes32 position = COLLATERAL_STORAGE_POSITION;\\n        assembly {\\n            collateralStorage.slot := position\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x0346bf8df22a8caf2c15afd027d7d3001681e6e169af5f20df4f99e7bd79f23b\",\"license\":\"MIT\"},\"contracts/libraries/LibFund.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity 0.8.18;\\n\\nimport {IGetters} from \\\"../interfaces/IGetters.sol\\\";\\n\\nimport {EnumerableSet} from \\\"@openzeppelin/contracts/utils/structs/EnumerableSet.sol\\\";\\nimport {LibTermStorage} from \\\"./LibTermStorage.sol\\\";\\nimport {LibFundStorage} from \\\"./LibFundStorage.sol\\\";\\n\\nlibrary LibFund {\\n    using EnumerableSet for EnumerableSet.AddressSet;\\n\\n    event OnTermStart(uint indexed termId); // Emits when a new term starts, this also marks the start of the first cycle\\n    event OnFundStateChanged(\\n        uint indexed termId,\\n        uint indexed currentCycle,\\n        LibFundStorage.FundStates indexed newState\\n    ); // Emits when state has updated\\n    event OnPaidContribution(uint indexed termId, address indexed payer, uint indexed currentCycle); // Emits when participant pays the contribution\\n\\n    /// @notice called by the term to init the fund\\n    /// @param termId the id of the term\\n    function _initFund(uint termId) internal {\\n        LibFundStorage.Fund storage fund = LibFundStorage._fundStorage().funds[termId];\\n        uint participantsArrayLength = fund.beneficiariesOrder.length;\\n        // Set and track participants\\n        for (uint i; i < participantsArrayLength; ) {\\n            EnumerableSet.add(fund._participants, fund.beneficiariesOrder[i]);\\n            fund.isParticipant[fund.beneficiariesOrder[i]] = true;\\n\\n            /// @custom:unchecked-block without risk, i can't be higher than beneficiariesOrder length\\n            unchecked {\\n                ++i;\\n            }\\n        }\\n\\n        // Starts the first cycle\\n        _startNewCycle(termId);\\n\\n        // Set timestamp of deployment, which will be used to determine cycle times\\n        // We do this after starting the first cycle to make sure the first cycle starts smoothly\\n        fund.fundStart = block.timestamp;\\n        //emit LibFund.OnTermStart(termId);\\n        emit OnTermStart(termId);\\n    }\\n\\n    /// @notice This starts the new cycle and can only be called internally. Used upon deploy\\n    /// @dev Rever if the fund is not in the right state or if it's too early to start a new cycle\\n    /// @param _termId The id of the term\\n    function _startNewCycle(uint _termId) internal {\\n        LibFundStorage.Fund storage fund = LibFundStorage._fundStorage().funds[_termId];\\n        LibTermStorage.Term storage term = LibTermStorage._termStorage().terms[_termId];\\n        // currentCycle is 0 when this is called for the first time\\n        require(block.timestamp > term.cycleTime * fund.currentCycle + fund.fundStart, \\\"TT-LF-01\\\");\\n        require(\\n            fund.currentState == LibFundStorage.FundStates.InitializingFund ||\\n                fund.currentState == LibFundStorage.FundStates.CycleOngoing,\\n            \\\"TT-LF-02\\\"\\n        );\\n\\n        ++fund.currentCycle;\\n        uint length = fund.beneficiariesOrder.length;\\n        for (uint i; i < length; ) {\\n            fund.paidThisCycle[fund.beneficiariesOrder[i]] = fund.paidNextCycle[\\n                fund.beneficiariesOrder[i]\\n            ];\\n            fund.paidNextCycle[fund.beneficiariesOrder[i]] = false;\\n\\n            /// @custom:unchecked-block without risk, i can't be higher than beneficiariesOrder length\\n            unchecked {\\n                ++i;\\n            }\\n        }\\n\\n        _setState(_termId, LibFundStorage.FundStates.AcceptingContributions);\\n\\n        // We attempt to make the autopayers pay their contribution right away\\n        _autoPay(_termId);\\n    }\\n\\n    /// @notice updates the state according to the input and makes sure the state can't be changed if\\n    ///         the fund is closed. Also emits an event that this happened\\n    /// @dev Reverts if the fund is closed\\n    /// @param _termId The id of the term\\n    /// @param _newState The new state of the fund\\n    function _setState(uint _termId, LibFundStorage.FundStates _newState) internal {\\n        LibFundStorage.Fund storage fund = LibFundStorage._fundStorage().funds[_termId];\\n        require(fund.currentState != LibFundStorage.FundStates.FundClosed, \\\"TT-LF-03\\\");\\n        fund.currentState = _newState;\\n        emit OnFundStateChanged(_termId, fund.currentCycle, _newState);\\n    }\\n\\n    /// @notice function to attempt to make autopayers pay their contribution\\n    /// @param _termId the id of the term\\n    function _autoPay(uint _termId) internal {\\n        LibFundStorage.Fund storage fund = LibFundStorage._fundStorage().funds[_termId];\\n\\n        // Get the beneficiary for this cycle\\n        address currentBeneficiary = IGetters(address(this)).getCurrentBeneficiary(_termId);\\n\\n        address[] memory autoPayers = fund.beneficiariesOrder; // use beneficiariesOrder because it is a single array with all participants\\n        uint autoPayersArray = autoPayers.length;\\n\\n        for (uint i; i < autoPayersArray; ) {\\n            address autoPayer = autoPayers[i];\\n            // The beneficiary doesn't pay\\n            if (currentBeneficiary == autoPayer) {\\n                /// @custom:unchecked-block without risk, i can't be higher than beneficiariesOrder length\\n                unchecked {\\n                    ++i;\\n                }\\n                continue;\\n            }\\n\\n            if (\\n                fund.autoPayEnabled[autoPayer] &&\\n                !fund.paidThisCycle[autoPayer] &&\\n                !fund.isExemptedOnCycle[fund.currentCycle].exempted[autoPayer]\\n            ) {\\n                _payContributionSafe(_termId, autoPayer, autoPayer);\\n            }\\n\\n            /// @custom:unchecked-block without risk, i can't be higher than beneficiariesOrder length\\n            unchecked {\\n                ++i;\\n            }\\n        }\\n    }\\n\\n    /// @notice function to pay the actual contribution for the cycle, used for autopay to prevent reverts\\n    /// @param _termId the id of the term\\n    /// @param _payer the address that's paying\\n    /// @param _participant the (participant) address that's being paid for\\n    function _payContributionSafe(uint _termId, address _payer, address _participant) internal {\\n        LibFundStorage.Fund storage fund = LibFundStorage._fundStorage().funds[_termId];\\n        LibTermStorage.Term storage term = LibTermStorage._termStorage().terms[_termId];\\n\\n        // Get the amount and do the actual transfer\\n        // This will only succeed if the sender approved this contract address beforehand\\n        uint amount = term.contributionAmount * 10 ** 6; // Deducted from user's wallet, six decimals\\n        try fund.stableToken.transferFrom(_payer, address(this), amount) returns (bool success) {\\n            if (success) {\\n                // Finish up, set that the participant paid for this cycle and emit an event that it's been done\\n                fund.paidThisCycle[_participant] = true;\\n                emit OnPaidContribution(_termId, _participant, fund.currentCycle);\\n            }\\n        } catch {}\\n    }\\n}\\n\",\"keccak256\":\"0x6b079139c59af286768f87eb87bbfde789b46c359f4b9a512588715f7dddde3f\",\"license\":\"MIT\"},\"contracts/libraries/LibFundStorage.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity 0.8.18;\\n\\nimport {IERC20} from \\\"@openzeppelin/contracts/token/ERC20/IERC20.sol\\\";\\n\\nimport {EnumerableSet} from \\\"@openzeppelin/contracts/utils/structs/EnumerableSet.sol\\\";\\n\\nlibrary LibFundStorage {\\n    using EnumerableSet for EnumerableSet.AddressSet;\\n\\n    bytes32 constant FUND_POSITION = keccak256(\\\"diamond.standard.fund\\\");\\n    bytes32 constant FUND_STORAGE_POSITION = keccak256(\\\"diamond.standard.fund.storage\\\");\\n\\n    enum FundStates {\\n        InitializingFund, // Time before the first cycle has started\\n        AcceptingContributions, // Triggers at the start of a cycle\\n        AwardingBeneficiary, // Contributions are closed, beneficiary is chosen, people default etc.\\n        CycleOngoing, // Time after beneficiary is chosen, up till the start of the next cycle\\n        FundClosed // Triggers at the end of the last contribution period, no state changes after this\\n    }\\n\\n    struct PayExemption {\\n        mapping(address => bool) exempted; // Mapping to keep track of if someone is exempted from paying\\n    }\\n\\n    struct Fund {\\n        bool initialized;\\n        FundStates currentState; // Variable to keep track of the different FundStates\\n        IERC20 stableToken; // Instance of the stable token\\n        address[] beneficiariesOrder; // The correct order of who gets to be next beneficiary, determined by collateral contract\\n        uint fundStart; // Timestamp of the start of the fund\\n        uint fundEnd; // Timestamp of the end of the fund\\n        uint currentCycle; // Index of current cycle\\n        mapping(address => bool) isParticipant; // Mapping to keep track of who's a participant or not\\n        mapping(address => bool) isBeneficiary; // Mapping to keep track of who's a beneficiary or not\\n        mapping(address => bool) paidThisCycle; // Mapping to keep track of who paid for this cycle\\n        mapping(address => bool) autoPayEnabled; // Wheter to attempt to automate payments at the end of the contribution period\\n        mapping(address => uint) beneficiariesPool; // Mapping to keep track on how much each beneficiary can claim. Six decimals\\n        mapping(address => bool) beneficiariesFrozenPool; // Frozen pool by beneficiaries, it can claim when his collateral is at least 1.1 X RCC\\n        mapping(address => uint) cycleOfExpulsion; // Mapping to keep track on which cycle a user was expelled\\n        mapping(uint => PayExemption) isExemptedOnCycle; // Mapping to keep track of if someone is exempted from paying this cycle\\n        EnumerableSet.AddressSet _participants; // Those who have not been beneficiaries yet and have not defaulted this cycle\\n        EnumerableSet.AddressSet _beneficiaries; // Those who have been beneficiaries and have not defaulted this cycle\\n        EnumerableSet.AddressSet _defaulters; // Both participants and beneficiaries who have defaulted this cycle\\n        uint expelledParticipants; // Total amount of participants that have been expelled so far\\n        uint totalAmountOfCycles;\\n        mapping(address => bool) expelledBeforeBeneficiary; // Mapping to keep track of who has been expelled before being a beneficiary\\n        mapping(address => bool) paidNextCycle; // Mapping to keep track of who has paid for the next cycle\\n    }\\n\\n    struct FundStorage {\\n        mapping(uint => Fund) funds; // termId => Fund struct\\n    }\\n\\n    function _fundExists(uint termId) internal view returns (bool) {\\n        return _fundStorage().funds[termId].initialized;\\n    }\\n\\n    function _fundStorage() internal pure returns (FundStorage storage fundStorage) {\\n        bytes32 position = FUND_STORAGE_POSITION;\\n        assembly {\\n            fundStorage.slot := position\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x7190084bd2a279424a536b51ac7fa2bccda2b2914d8da928a318f3a20dc1e489\",\"license\":\"MIT\"},\"contracts/libraries/LibGettersHelpers.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity 0.8.18;\\n\\nlibrary LibGettersHelpers {\\n    struct NonUserRelated {\\n        // Positions and security deposits related\\n        uint[] availablePositions;\\n        uint[] securityDeposits;\\n        // Times and contributions related\\n        uint remainingRegistrationTime; // In seconds\\n        uint remainingContributionTime; // In seconds\\n        uint remainingCycleTime; // In seconds\\n        uint remainingCycles;\\n        uint rcc; // Remaining Contribution Cycles in wei\\n        uint latestPrice; // From Chainlink\\n        // Collateral related\\n        bool collateralInitialized;\\n        uint collateralFirstDepositTime; // In seconds\\n        uint collateralCounterMembers; // Member count\\n        // Fund related\\n        bool fundInitialized;\\n        uint fundStartTime; // In seconds\\n        uint fundEndTime; // In seconds\\n        uint fundCurrentCycle;\\n        uint fundExpellantsCount;\\n        uint fundTotalCycles;\\n        address[] fundBeneficiariesOrder;\\n        // Yield related\\n        bool yieldInitialized;\\n        uint yieldStartTime; // In seconds\\n        uint yieldTotalDeposit; // In wei\\n        uint yieldCurrentTotalDeposit; // In wei\\n        uint yieldTotalShares;\\n        address[] yieldUsers;\\n    }\\n\\n    struct UserRelated {\\n        // Collateral related\\n        bool collateralMember;\\n        bool isUnderCollaterized;\\n        uint membersBank;\\n        uint paymentBank;\\n        uint deposited;\\n        uint expulsonLimit;\\n        uint withdrawableBalance;\\n        // Fund related\\n        bool fundMember;\\n        bool beneficiary;\\n        bool currentCyclePaid;\\n        bool nextCyclePaid;\\n        bool autoPayer;\\n        bool moneyPotFrozen;\\n        bool exemptedThisCycle;\\n        uint pool;\\n        uint cycleExpelled;\\n        // Yield related\\n        bool yieldMember;\\n        uint collateralDepositedInYield;\\n        uint collateralWithdrawnFromYield;\\n        uint yieldAvailable;\\n        uint yieldWithdrawn;\\n        uint distributedYield;\\n    }\\n}\\n\",\"keccak256\":\"0x1cff213f2c4593cb5305eec23f046022ff9ebeb74127bd34b9a4dfdbde946225\",\"license\":\"MIT\"},\"contracts/libraries/LibTermOwnership.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity 0.8.18;\\n\\nimport {LibTermStorage} from \\\"../libraries/LibTermStorage.sol\\\";\\n\\nlibrary LibTermOwnership {\\n    /// @dev Revert if the sender is not the term owner.\\n    function _ensureTermOwner(uint termId) internal view {\\n        require(LibTermStorage._termStorage().terms[termId].termOwner == msg.sender, \\\"TT-LTO-01\\\");\\n    }\\n}\\n\",\"keccak256\":\"0x9f7e1ce63f6cec6f7543ae335ffeedc6a6ce81358d09e66b98e02e26f4b117a5\",\"license\":\"MIT\"},\"contracts/libraries/LibTermStorage.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity 0.8.18;\\n\\nlibrary LibTermStorage {\\n    bytes32 constant TERM_CONSTS_POSITION = keccak256(\\\"diamond.standard.term.consts\\\");\\n    bytes32 constant TERM_STORAGE_POSITION = keccak256(\\\"diamond.standard.term.storage\\\");\\n\\n    enum TermStates {\\n        InitializingTerm,\\n        ActiveTerm,\\n        ExpiredTerm,\\n        ClosedTerm\\n    }\\n\\n    struct TermConsts {\\n        mapping(string => address) aggregatorsAddresses; // \\\"ETH/USD\\\" => address , \\\"USDC/USD\\\" => address\\n    }\\n\\n    struct Term {\\n        bool initialized;\\n        TermStates state;\\n        address termOwner;\\n        uint creationTime; // In seconds\\n        uint termId;\\n        uint registrationPeriod; // Time for registration (seconds)\\n        uint totalParticipants; // Max number of participants\\n        uint cycleTime; // Time for single cycle (seconds)\\n        uint contributionAmount; // Amount user must pay per cycle (USD)\\n        uint contributionPeriod; // The portion of cycle user must make payment\\n        address stableTokenAddress;\\n    }\\n\\n    struct TermStorage {\\n        uint nextTermId;\\n        mapping(uint => Term) terms; // termId => Term struct\\n        mapping(address => uint[]) participantToTermId; // userAddress => [termId1, termId2, ...]\\n    }\\n\\n    function _termExists(uint termId) internal view returns (bool) {\\n        return _termStorage().terms[termId].initialized;\\n    }\\n\\n    function _termConsts() internal pure returns (TermConsts storage termConsts) {\\n        bytes32 position = TERM_CONSTS_POSITION;\\n        assembly {\\n            termConsts.slot := position\\n        }\\n    }\\n\\n    function _termStorage() internal pure returns (TermStorage storage termStorage) {\\n        bytes32 position = TERM_STORAGE_POSITION;\\n        assembly {\\n            termStorage.slot := position\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0xc671ba65f7ac40f73277faaa02649273153214e4a47aa5557b8b63b08270f6da\",\"license\":\"MIT\"},\"hardhat-deploy/solc_0.8/diamond/interfaces/IDiamondCut.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.0;\\n\\n/******************************************************************************\\\\\\n* Author: Nick Mudge <nick@perfectabstractions.com> (https://twitter.com/mudgen)\\n* EIP-2535 Diamonds: https://eips.ethereum.org/EIPS/eip-2535\\n/******************************************************************************/\\n\\ninterface IDiamondCut {\\n    enum FacetCutAction {Add, Replace, Remove}\\n    // Add=0, Replace=1, Remove=2\\n\\n    struct FacetCut {\\n        address facetAddress;\\n        FacetCutAction action;\\n        bytes4[] functionSelectors;\\n    }\\n\\n    /// @notice Add/replace/remove any number of functions and optionally execute\\n    ///         a function with delegatecall\\n    /// @param _diamondCut Contains the facet addresses and function selectors\\n    /// @param _init The address of the contract or facet to execute _calldata\\n    /// @param _calldata A function call, including function selector and arguments\\n    ///                  _calldata is executed with delegatecall on _init\\n    function diamondCut(\\n        FacetCut[] calldata _diamondCut,\\n        address _init,\\n        bytes calldata _calldata\\n    ) external;\\n\\n    event DiamondCut(FacetCut[] _diamondCut, address _init, bytes _calldata);\\n}\\n\",\"keccak256\":\"0xc00c16bfa30a3fa5f3dc684f7f8ba62c259962b25f647d9588739458989717fc\",\"license\":\"MIT\"},\"hardhat-deploy/solc_0.8/diamond/libraries/LibDiamond.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.0;\\n\\n/******************************************************************************\\\\\\n* Author: Nick Mudge <nick@perfectabstractions.com> (https://twitter.com/mudgen)\\n* EIP-2535 Diamonds: https://eips.ethereum.org/EIPS/eip-2535\\n/******************************************************************************/\\nimport { IDiamondCut } from \\\"../interfaces/IDiamondCut.sol\\\";\\n\\nlibrary LibDiamond {\\n    bytes32 constant DIAMOND_STORAGE_POSITION = keccak256(\\\"diamond.standard.diamond.storage\\\");\\n\\n    struct FacetAddressAndPosition {\\n        address facetAddress;\\n        uint96 functionSelectorPosition; // position in facetFunctionSelectors.functionSelectors array\\n    }\\n\\n    struct FacetFunctionSelectors {\\n        bytes4[] functionSelectors;\\n        uint256 facetAddressPosition; // position of facetAddress in facetAddresses array\\n    }\\n\\n    struct DiamondStorage {\\n        // maps function selector to the facet address and\\n        // the position of the selector in the facetFunctionSelectors.selectors array\\n        mapping(bytes4 => FacetAddressAndPosition) selectorToFacetAndPosition;\\n        // maps facet addresses to function selectors\\n        mapping(address => FacetFunctionSelectors) facetFunctionSelectors;\\n        // facet addresses\\n        address[] facetAddresses;\\n        // Used to query if a contract implements an interface.\\n        // Used to implement ERC-165.\\n        mapping(bytes4 => bool) supportedInterfaces;\\n        // owner of the contract\\n        address contractOwner;\\n    }\\n\\n    function diamondStorage() internal pure returns (DiamondStorage storage ds) {\\n        bytes32 position = DIAMOND_STORAGE_POSITION;\\n        assembly {\\n            ds.slot := position\\n        }\\n    }\\n\\n    event OwnershipTransferred(address indexed previousOwner, address indexed newOwner);\\n\\n    function setContractOwner(address _newOwner) internal {\\n        DiamondStorage storage ds = diamondStorage();\\n        address previousOwner = ds.contractOwner;\\n        ds.contractOwner = _newOwner;\\n        emit OwnershipTransferred(previousOwner, _newOwner);\\n    }\\n\\n    function contractOwner() internal view returns (address contractOwner_) {\\n        contractOwner_ = diamondStorage().contractOwner;\\n    }\\n\\n    function enforceIsContractOwner() internal view {\\n        require(msg.sender == diamondStorage().contractOwner, \\\"LibDiamond: Must be contract owner\\\");\\n    }\\n\\n    event DiamondCut(IDiamondCut.FacetCut[] _diamondCut, address _init, bytes _calldata);\\n\\n    // Internal function version of diamondCut\\n    function diamondCut(\\n        IDiamondCut.FacetCut[] memory _diamondCut,\\n        address _init,\\n        bytes memory _calldata\\n    ) internal {\\n        for (uint256 facetIndex; facetIndex < _diamondCut.length; facetIndex++) {\\n            IDiamondCut.FacetCutAction action = _diamondCut[facetIndex].action;\\n            if (action == IDiamondCut.FacetCutAction.Add) {\\n                addFunctions(_diamondCut[facetIndex].facetAddress, _diamondCut[facetIndex].functionSelectors);\\n            } else if (action == IDiamondCut.FacetCutAction.Replace) {\\n                replaceFunctions(_diamondCut[facetIndex].facetAddress, _diamondCut[facetIndex].functionSelectors);\\n            } else if (action == IDiamondCut.FacetCutAction.Remove) {\\n                removeFunctions(_diamondCut[facetIndex].facetAddress, _diamondCut[facetIndex].functionSelectors);\\n            } else {\\n                revert(\\\"LibDiamondCut: Incorrect FacetCutAction\\\");\\n            }\\n        }\\n        emit DiamondCut(_diamondCut, _init, _calldata);\\n        initializeDiamondCut(_init, _calldata);\\n    }\\n\\n    function addFunctions(address _facetAddress, bytes4[] memory _functionSelectors) internal {\\n        require(_functionSelectors.length > 0, \\\"LibDiamondCut: No selectors in facet to cut\\\");\\n        DiamondStorage storage ds = diamondStorage();        \\n        require(_facetAddress != address(0), \\\"LibDiamondCut: Add facet can't be address(0)\\\");\\n        uint96 selectorPosition = uint96(ds.facetFunctionSelectors[_facetAddress].functionSelectors.length);\\n        // add new facet address if it does not exist\\n        if (selectorPosition == 0) {\\n            addFacet(ds, _facetAddress);            \\n        }\\n        for (uint256 selectorIndex; selectorIndex < _functionSelectors.length; selectorIndex++) {\\n            bytes4 selector = _functionSelectors[selectorIndex];\\n            address oldFacetAddress = ds.selectorToFacetAndPosition[selector].facetAddress;\\n            require(oldFacetAddress == address(0), \\\"LibDiamondCut: Can't add function that already exists\\\");\\n            addFunction(ds, selector, selectorPosition, _facetAddress);\\n            selectorPosition++;\\n        }\\n    }\\n\\n    function replaceFunctions(address _facetAddress, bytes4[] memory _functionSelectors) internal {\\n        require(_functionSelectors.length > 0, \\\"LibDiamondCut: No selectors in facet to cut\\\");\\n        DiamondStorage storage ds = diamondStorage();\\n        require(_facetAddress != address(0), \\\"LibDiamondCut: Add facet can't be address(0)\\\");\\n        uint96 selectorPosition = uint96(ds.facetFunctionSelectors[_facetAddress].functionSelectors.length);\\n        // add new facet address if it does not exist\\n        if (selectorPosition == 0) {\\n            addFacet(ds, _facetAddress);\\n        }\\n        for (uint256 selectorIndex; selectorIndex < _functionSelectors.length; selectorIndex++) {\\n            bytes4 selector = _functionSelectors[selectorIndex];\\n            address oldFacetAddress = ds.selectorToFacetAndPosition[selector].facetAddress;\\n            require(oldFacetAddress != _facetAddress, \\\"LibDiamondCut: Can't replace function with same function\\\");\\n            removeFunction(ds, oldFacetAddress, selector);\\n            addFunction(ds, selector, selectorPosition, _facetAddress);\\n            selectorPosition++;\\n        }\\n    }\\n\\n    function removeFunctions(address _facetAddress, bytes4[] memory _functionSelectors) internal {\\n        require(_functionSelectors.length > 0, \\\"LibDiamondCut: No selectors in facet to cut\\\");\\n        DiamondStorage storage ds = diamondStorage();\\n        // if function does not exist then do nothing and return\\n        require(_facetAddress == address(0), \\\"LibDiamondCut: Remove facet address must be address(0)\\\");\\n        for (uint256 selectorIndex; selectorIndex < _functionSelectors.length; selectorIndex++) {\\n            bytes4 selector = _functionSelectors[selectorIndex];\\n            address oldFacetAddress = ds.selectorToFacetAndPosition[selector].facetAddress;\\n            removeFunction(ds, oldFacetAddress, selector);\\n        }\\n    }\\n\\n    function addFacet(DiamondStorage storage ds, address _facetAddress) internal {\\n        enforceHasContractCode(_facetAddress, \\\"LibDiamondCut: New facet has no code\\\");\\n        ds.facetFunctionSelectors[_facetAddress].facetAddressPosition = ds.facetAddresses.length;\\n        ds.facetAddresses.push(_facetAddress);\\n    }    \\n\\n\\n    function addFunction(DiamondStorage storage ds, bytes4 _selector, uint96 _selectorPosition, address _facetAddress) internal {\\n        ds.selectorToFacetAndPosition[_selector].functionSelectorPosition = _selectorPosition;\\n        ds.facetFunctionSelectors[_facetAddress].functionSelectors.push(_selector);\\n        ds.selectorToFacetAndPosition[_selector].facetAddress = _facetAddress;\\n    }\\n\\n    function removeFunction(DiamondStorage storage ds, address _facetAddress, bytes4 _selector) internal {        \\n        require(_facetAddress != address(0), \\\"LibDiamondCut: Can't remove function that doesn't exist\\\");\\n        // an immutable function is a function defined directly in a diamond\\n        require(_facetAddress != address(this), \\\"LibDiamondCut: Can't remove immutable function\\\");\\n        // replace selector with last selector, then delete last selector\\n        uint256 selectorPosition = ds.selectorToFacetAndPosition[_selector].functionSelectorPosition;\\n        uint256 lastSelectorPosition = ds.facetFunctionSelectors[_facetAddress].functionSelectors.length - 1;\\n        // if not the same then replace _selector with lastSelector\\n        if (selectorPosition != lastSelectorPosition) {\\n            bytes4 lastSelector = ds.facetFunctionSelectors[_facetAddress].functionSelectors[lastSelectorPosition];\\n            ds.facetFunctionSelectors[_facetAddress].functionSelectors[selectorPosition] = lastSelector;\\n            ds.selectorToFacetAndPosition[lastSelector].functionSelectorPosition = uint96(selectorPosition);\\n        }\\n        // delete the last selector\\n        ds.facetFunctionSelectors[_facetAddress].functionSelectors.pop();\\n        delete ds.selectorToFacetAndPosition[_selector];\\n\\n        // if no more selectors for facet address then delete the facet address\\n        if (lastSelectorPosition == 0) {\\n            // replace facet address with last facet address and delete last facet address\\n            uint256 lastFacetAddressPosition = ds.facetAddresses.length - 1;\\n            uint256 facetAddressPosition = ds.facetFunctionSelectors[_facetAddress].facetAddressPosition;\\n            if (facetAddressPosition != lastFacetAddressPosition) {\\n                address lastFacetAddress = ds.facetAddresses[lastFacetAddressPosition];\\n                ds.facetAddresses[facetAddressPosition] = lastFacetAddress;\\n                ds.facetFunctionSelectors[lastFacetAddress].facetAddressPosition = facetAddressPosition;\\n            }\\n            ds.facetAddresses.pop();\\n            delete ds.facetFunctionSelectors[_facetAddress].facetAddressPosition;\\n        }\\n    }\\n\\n    function initializeDiamondCut(address _init, bytes memory _calldata) internal {\\n        if (_init == address(0)) {\\n            require(_calldata.length == 0, \\\"LibDiamondCut: _init is address(0) but_calldata is not empty\\\");\\n        } else {\\n            require(_calldata.length > 0, \\\"LibDiamondCut: _calldata is empty but _init is not address(0)\\\");\\n            if (_init != address(this)) {\\n                enforceHasContractCode(_init, \\\"LibDiamondCut: _init address has no code\\\");\\n            }\\n            (bool success, bytes memory error) = _init.delegatecall(_calldata);\\n            if (!success) {\\n                if (error.length > 0) {\\n                    // bubble up the error\\n                    revert(string(error));\\n                } else {\\n                    revert(\\\"LibDiamondCut: _init function reverted\\\");\\n                }\\n            }\\n        }\\n    }\\n\\n    function enforceHasContractCode(address _contract, string memory _errorMessage) internal view {\\n        uint256 contractSize;\\n        assembly {\\n            contractSize := extcodesize(_contract)\\n        }\\n        require(contractSize > 0, _errorMessage);\\n    }\\n}\\n\",\"keccak256\":\"0x2205345e83eb86f5281f159a9215a096cb6d404782619f9b8e9d7a4a46c32a37\",\"license\":\"MIT\"}},\"version\":1}",
  "bytecode": "0x608060405234801561001057600080fd5b50612a13806100206000396000f3fe608060405234801561001057600080fd5b50600436106100885760003560e01c80636fee6ee81161005b5780636fee6ee8146100db5780637be2ecea146100ee5780638443162914610101578063ea28b9bb1461011457600080fd5b80630cee17251461008d5780632009844b146100a25780634b5c9c80146100b557806358733dec146100c8575b600080fd5b6100a061009b3660046125c1565b610127565b005b6100a06100b03660046125c1565b610134565b6100a06100c33660046125c1565b61016e565b6100a06100d63660046125c1565b6103bc565b6100a06100e93660046125ef565b610837565b6100a06100fc3660046125c1565b610845565b6100a061010f3660046125ef565b61084e565b6100a06101223660046125c1565b610883565b610131813361098d565b50565b600081815260008051602061297e833981519152602052604081209061015b828433610c40565b905061016983333384610f68565b505050565b610176611149565b600081815260008051602061297e833981519152602052604090208054600490610100900460ff16818111156101ae576101ae61261f565b1480156101cb575060038101546101c89062ed4e0061264b565b42115b6102075760405162461bcd60e51b815260206004820152600860248201526754542d46462d303360c01b60448201526064015b60405180910390fd5b6001810154600090815b818110156102f85760008460090160008660010184815481106102365761023661265e565b60009182526020808320909101546001600160a01b0316835282019290925260400190205411156102f05783600901600085600101838154811061027c5761027c61265e565b60009182526020808320909101546001600160a01b031683528201929092526040019020546102ab908461264b565b925060008460090160008660010184815481106102ca576102ca61265e565b60009182526020808320909101546001600160a01b031683528201929092526040019020555b600101610211565b5081156103b657825460405163a9059cbb60e01b8152336004820152602481018490526000916201000090046001600160a01b03169063a9059cbb906044016020604051808303816000875af1158015610356573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061037a9190612674565b9050806103b45760405162461bcd60e51b815260206004820152600860248201526715150b51918b4c0d60c21b60448201526064016101fe565b505b50505050565b600081815260008051602061297e8339815191526020908152604080832060008051602061299e83398151915290925290912060078101546002830154600484015461040a90600190612696565b836005015461041991906126a9565b610423919061264b565b61042d919061264b565b42116104665760405162461bcd60e51b815260206004820152600860248201526754542d46462d303160c01b60448201526064016101fe565b60018254610100900460ff1660048111156104835761048361261f565b146104a05760405162461bcd60e51b81526004016101fe906126c0565b60405163d8f8e99160e01b815260048101849052600090309063d8f8e99190602401602060405180830381865afa1580156104df573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061050391906126f2565b905061050e846111d2565b6105198460026113a3565b60008360010180548060200260200160405190810160405280929190818152602001828054801561057357602002820191906000526020600020905b81546001600160a01b03168152600190910190602001808311610555575b50508351600489015494955093925060009150505b8281101561080b5760008482815181106105a4576105a461265e565b60200260200101519050856001600160a01b0316816001600160a01b031614806105f257506000838152600c8901602090815260408083206001600160a01b038516845290915290205460ff165b1561065b57610604886011018261147f565b156106525761061688601101826114a6565b50856001600160a01b0316816001600160a01b0316036106435761063d88600f01826114bb565b50610652565b61065088600d01826114bb565b505b50600101610588565b6001600160a01b038116600090815260078901602052604090205460ff16156106d0576001600160a01b038116600090815260068901602052604090205460ff16156106b4576106ae88600f01826114bb565b506106c3565b6106c188600d01826114bb565b505b61063d88601101826114a6565b6106dd886011018261147f565b158015610756575060405163d7992e5b60e01b8152600481018a90526001600160a01b0382166024820152309063d7992e5b90604401602060405180830381865afa158015610730573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107549190612674565b155b156106525760405163d7992e5b60e01b8152600481018a90526001600160a01b0387166024820152309063d7992e5b90604401602060405180830381865afa1580156107a6573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107ca9190612674565b15610801576001600160a01b038116600090815260068901602052604090205460ff16156107fc576107fc89826114d0565b610652565b61065289826114d0565b506108168686611598565b856014015486600401541061082e5761082e876119aa565b50505050505050565b610841828261098d565b5050565b61013181611a48565b600082815260008051602061297e8339815191526020526040812090610875828585610c40565b90506103b684338584610f68565b60008181526000805160206129be8339815191526020908152604080832060008051602061297e83398151915283528184203385526004820190935292205460ff166108fc5760405162461bcd60e51b815260206004820152600860248201526754542d46462d303560c01b60448201526064016101fe565b60048154610100900460ff1660048111156109195761091961261f565b036109365760405162461bcd60e51b81526004016101fe906126c0565b336000818152600883016020526040808220805460ff81161560ff199091168117909155905190928392909187917f8bd3cffd2d87eca262a8e2d638c1ff3d3b61c604208115af6295b089acaf72b991a450505050565b600082815260008051602061297e833981519152602090815260408083206000805160206129be833981519152835281842033855260158201909352922054825460ff91821691600491610100900416818111156109ed576109ed61261f565b1480610a0a575033600090815260068401602052604090205460ff165b80610a125750805b610a495760405162461bcd60e51b81526020600482015260086024820152670a8a85a8c8c5a60760c31b60448201526064016101fe565b336000908152600984016020908152604080832054600a8701835281842054600687019093529220549115159160ff9091169015158280610a875750815b80610a8f5750805b610ac65760405162461bcd60e51b815260206004820152600860248201526754542d46462d303960c01b60448201526064016101fe565b8115610c1457600088815260008051602061299e8339815191526020908152604080832081516101608101909252805460ff80821615158452610ba6948401916101009004166003811115610b1d57610b1d61261f565b6003811115610b2e57610b2e61261f565b815281546001600160a01b036201000090910481166020830152600183015460408301526002830154606083015260038301546080830152600483015460a0830152600583015460c0830152600683015460e08301526007830154610100830152600890920154909116610120909101528833611c7d565b905060048754610100900460ff166004811115610bc557610bc561261f565b14610c03578015610c035760405162461bcd60e51b8152602060048201526008602482015267054542d46462d31360c41b60448201526064016101fe565b610c0e89338a611e0b565b50610c25565b8215610c2557610c25883389611e0b565b8015610c3657610c36883389611ff9565b5050505050505050565b600060018454610100900460ff166004811115610c5f57610c5f61261f565b1480610c85575060038454610100900460ff166004811115610c8357610c8361261f565b145b610ca15760405162461bcd60e51b81526004016101fe906126c0565b6001600160a01b038216600090815260058501602052604090205460ff16610cf65760405162461bcd60e51b81526020600482015260086024820152672a2a16a32316989960c11b60448201526064016101fe565b60008060018654610100900460ff166004811115610d1657610d1661261f565b03610de3576001600160a01b038416600090815260078701602052604090205460ff1615610d715760405162461bcd60e51b815260206004820152600860248201526754542d46462d313360c01b60448201526064016101fe565b5060048581015460405163d8f8e99160e01b815291820186905290309063d8f8e99190602401602060405180830381865afa158015610db4573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610dd891906126f2565b915060009250610eb3565b6001600160a01b038416600090815260168701602052604090205460ff1615610e395760405162461bcd60e51b815260206004820152600860248201526754542d46462d313360c01b60448201526064016101fe565b6004860154610e4990600161264b565b604051630b5646f760e21b8152600481018790529091503090632d591bdc90602401602060405180830381865afa158015610e88573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610eac91906126f2565b9150600192505b836001600160a01b0316826001600160a01b031603610eff5760405162461bcd60e51b815260206004820152600860248201526715150b51918b4c4d60c21b60448201526064016101fe565b6000818152600c8701602090815260408083206001600160a01b038816845290915290205460ff1615610f5f5760405162461bcd60e51b815260206004820152600860248201526754542d46462d313560c01b60448201526064016101fe565b50509392505050565b600084815260008051602061297e8339815191526020908152604080832060008051602061299e8339815191529092528220600681015491929091610fb090620f42406126a9565b83546040516323b872dd60e01b81526001600160a01b0389811660048301523060248301526044820184905292935060009262010000909204909116906323b872dd906064016020604051808303816000875af1158015611015573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906110399190612674565b9050806110735760405162461bcd60e51b815260206004820152600860248201526754542d46462d303760c01b60448201526064016101fe565b846110d3576001600160a01b0386166000818152600786016020526040808220805460ff19166001179055600487015490519092918b917fe1122b3cea22012386ebf236fc23dd8a783b91c046d5dec812901846464624ae9190a4610c36565b6001600160a01b03861660009081526016850160205260409020805460ff1916600190811790915560048501546111099161264b565b6040516001600160a01b038816908a907fe1122b3cea22012386ebf236fc23dd8a783b91c046d5dec812901846464624ae90600090a45050505050505050565b7fc8fcad8db84d3cc18b4c41d551ea0ee66dd599cde068d998e57d5e09332c131c600401546001600160a01b031633146111d05760405162461bcd60e51b815260206004820152602260248201527f4c69624469616d6f6e643a204d75737420626520636f6e7472616374206f776e60448201526132b960f11b60648201526084016101fe565b565b600060008051602061297e83398151915260008381526020919091526040808220905163d8f8e99160e01b815260048101859052909250309063d8f8e99190602401602060405180830381865afa158015611231573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061125591906126f2565b90506000826001018054806020026020016040519081016040528092919081815260200182805480156112b157602002820191906000526020600020905b81546001600160a01b03168152600190910190602001808311611293575b505083519394506000925050505b8181101561139b5760008382815181106112db576112db61265e565b60200260200101519050806001600160a01b0316856001600160a01b03160361130757506001016112bf565b6001600160a01b038116600090815260088701602052604090205460ff16801561134c57506001600160a01b038116600090815260078701602052604090205460ff16155b8015611382575060048601546000908152600c8701602090815260408083206001600160a01b038516845290915290205460ff16155b1561139257611392878283612170565b506001016112bf565b505050505050565b600082815260008051602061297e833981519152602052604090208054600490610100900460ff16818111156113db576113db61261f565b036114135760405162461bcd60e51b815260206004820152600860248201526754542d4c462d303360c01b60448201526064016101fe565b80548290829061ff0019166101008360048111156114335761143361261f565b021790555081600481111561144a5761144a61261f565b600482015460405185907fe515107ce875160b9ed93bfd1367820d3ffbf412cd63d05140f6bc5535b51de390600090a4505050565b6001600160a01b038116600090815260018301602052604081205415155b90505b92915050565b600061149d836001600160a01b0384166122a0565b600061149d836001600160a01b038416612393565b600082815260008051602061297e83398151915260205260408120906114f9600d8301846114a6565b9050806115105761150d82600f01846114a6565b90505b806115485760405162461bcd60e51b81526020600482015260086024820152672a2a16a32316981b60c11b60448201526064016101fe565b61155582601101846114bb565b50826001600160a01b03168260040154857f482c1cb26174abc97f4629d6f41ab133dbda268210ea1ced6c07c27857469a0360405160405180910390a450505050565b600281015460405163d8f8e99160e01b8152600091309163d8f8e991916115c59160040190815260200190565b602060405180830381865afa1580156115e2573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061160691906126f2565b90506000611616846011016123e2565b111561174657600030632081c1af84611631601188016123ec565b6040518363ffffffff1660e01b815260040161164e929190612775565b6000604051808303816000875af115801561166d573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526116959190810190612837565b805190915060005b818110156117425760006001600160a01b03168382815181106116c2576116c261265e565b60200260200101516001600160a01b031614806117095750836001600160a01b03168382815181106116f6576116f661265e565b60200260200101516001600160a01b0316145b156117165760010161169d565b61173a868685848151811061172d5761172d61265e565b6020026020010151612400565b60010161169d565b5050505b61175383600d01826114a6565b156117675761176583600f01826114bb565b505b6001600160a01b03811660009081526006840160209081526040808320805460ff191660019081179091558601805482518185028101850190935280835284938301828280156117e057602002820191906000526020600020905b81546001600160a01b031681526001909101906020018083116117c2575b505083519394506000925050505b818110156118505786600701600084838151811061180e5761180e61265e565b6020908102919091018101516001600160a01b031682528101919091526040016000205460ff16156118485783611844816128fc565b9450505b6001016117ee565b50604080516101608101909152855460ff80821615158352611914929188916020840191610100900416600381111561188b5761188b61261f565b600381111561189c5761189c61261f565b815281546001600160a01b036201000090910481166020830152600183015460408301526002830154606083015260038301546080830152600483015460a0830152600583015460c0830152600683015460e08301526007830154610100830152600890920154909116610120909101528786611c7d565b5082856006015461192591906126a9565b61193290620f42406126a9565b6001600160a01b03851660009081526009880160205260408120805490919061195c90849061264b565b909155505060028501546040516001600160a01b03861691907f1f2267669c1e46109302869b7cd09b21fd5ac4d2da01a6bbc086c1fe7b997fa390600090a361139b856002015460036113a3565b600081815260008051602061297e8339815191526020908152604080832060008051602061299e833981519152909252909120426003830155805461ff0019166103001781556119fb8360046113a3565b6040516339007b7760e01b81526004810184905230906339007b7790602401600060405180830381600087803b158015611a3457600080fd5b505af115801561082e573d6000803e3d6000fd5b600081815260008051602061297e8339815191526020908152604080832060008051602061299e833981519152909252909120600282015460048301546005830154611a9491906126a9565b611a9e919061264b565b4211611ad75760405162461bcd60e51b815260206004820152600860248201526754542d4c462d303160c01b60448201526064016101fe565b60008254610100900460ff166004811115611af457611af461261f565b1480611b1a575060038254610100900460ff166004811115611b1857611b1861261f565b145b611b515760405162461bcd60e51b81526020600482015260086024820152672a2a16a62316981960c11b60448201526064016101fe565b8160040160008154611b62906128fc565b90915550600182015460005b81811015611c6857836016016000856001018381548110611b9157611b9161265e565b60009182526020808320909101546001600160a01b0316835282019290925260400181205460018601805460ff90921692600788019290919085908110611bda57611bda61265e565b6000918252602080832091909101546001600160a01b031683528201929092526040018120805460ff1916921515929092179091556001850180546016870191839185908110611c2c57611c2c61265e565b6000918252602080832091909101546001600160a01b031683528201929092526040019020805460ff1916911515919091179055600101611b6e565b50611c748460016113a3565b6103b6846111d2565b608083015160009081526000805160206129be833981519152602090815260408083206001600160a01b03851684526015860190925282205460ff168015611ce6576001600160a01b0384166000908152600a860160205260409020805460ff19169055611de4565b608086015160405163f0d826e760e01b8152600091309163f0d826e791611d139160040190815260200190565b602060405180830381865afa158015611d30573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611d549190612915565b905060006064611d6583606e6126a9565b611d6f919061292e565b6001600160a01b0387166000908152600586016020526040902054909150811115611dbe576001600160a01b0386166000908152600a880160205260409020805460ff19166001179055611de1565b6001600160a01b0386166000908152600a880160205260409020805460ff191690555b50505b5050506001600160a01b03166000908152600a91909101602052604090205460ff16919050565b600060008051602061297e8339815191526000858152602091825260408082206001600160a01b0387811684526009820190945281832054815492516370a0823160e01b81523060048201529195509362010000909204909116906370a0823190602401602060405180830381865afa158015611e8c573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611eb09190612915565b905081811015611edd5760405163cf47918160e01b815260048101829052602481018390526044016101fe565b6001600160a01b0385811660009081526009850160205260408082208290558554905163a9059cbb60e01b8152878416600482015260248101869052919262010000909104169063a9059cbb906044016020604051808303816000875af1158015611f4c573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611f709190612674565b905080611faa5760405162461bcd60e51b815260206004820152600860248201526715150b51918b4c0d60c21b60448201526064016101fe565b506040516001600160a01b03858116825283919087169088907fe7e8d59c293d6fd984f4662b0040f878f38468324cb305b1e3153ca7f220fbb7906020015b60405180910390a4505050505050565b600083815260008051602061297e833981519152602052604090205460ff1661204f5760405162461bcd60e51b815260206004820152600860248201526754542d4c432d303160c01b60448201526064016101fe565b60008381526000805160206129be833981519152602090815260408083206001600160a01b03861684526006810190925290912054806120bc5760405162461bcd60e51b81526020600482015260086024820152672a2a16a62196981960c11b60448201526064016101fe565b6001600160a01b03848116600090815260068401602052604080822082905551909185169083908381818185875af1925050503d806000811461211b576040519150601f19603f3d011682016040523d82523d6000602084013e612120565b606091505b505090508061212e57600080fd5b6040516001600160a01b03858116825283919087169088907f9ab9de9b3736782afba7d3401b3151a36aaf0b758b1db77e9c96536b73d0258090602001611fe9565b600083815260008051602061297e8339815191526020908152604080832060008051602061299e83398151915290925282206006810154919290916121b890620f42406126a9565b83546040516323b872dd60e01b81526001600160a01b0388811660048301523060248301526044820184905292935062010000909104909116906323b872dd906064016020604051808303816000875af1925050508015612236575060408051601f3d908101601f1916820190925261223391810190612674565b60015b1561139b57801561082e576001600160a01b0385166000818152600786016020526040808220805460ff19166001179055600487015490519092918a917fe1122b3cea22012386ebf236fc23dd8a783b91c046d5dec812901846464624ae9190a450505050505050565b600081815260018301602052604081205480156123895760006122c4600183612696565b85549091506000906122d890600190612696565b905081811461233d5760008660000182815481106122f8576122f861265e565b906000526020600020015490508087600001848154811061231b5761231b61265e565b6000918252602080832090910192909255918252600188019052604090208390555b855486908061234e5761234e612950565b6001900381819060005260206000200160009055905585600101600086815260200190815260200160002060009055600193505050506114a0565b60009150506114a0565b60008181526001830160205260408120546123da575081546001818101845560008481526020808220909301849055845484825282860190935260409020919091556114a0565b5060006114a0565b60006114a0825490565b606060006123f983612565565b9392505050565b6001600160a01b038116600090815260058401602052604090205460ff168015612432575061243283601101826114a6565b6124695760405162461bcd60e51b815260206004820152600860248201526754542d46462d313160c01b60448201526064016101fe565b600282015460009081526000805160206129be833981519152602090815260408083206001600160a01b0385168452600587018352818420805460ff1990811690915560048201845282852080549091169055600687019092529091205460ff166124f4576001600160a01b03821660009081526015850160205260409020805460ff191660011790555b826004016000815461250590612966565b9091555060138401805460009061251b906128fc565b90915550600484015460028401546040516001600160a01b0385169291907f75072bae902443c91c7fe516bbb4da2a101e088aa10737ec2ecb7aa3beb023d190600090a450505050565b6060816000018054806020026020016040519081016040528092919081815260200182805480156125b557602002820191906000526020600020905b8154815260200190600101908083116125a1575b50505050509050919050565b6000602082840312156125d357600080fd5b5035919050565b6001600160a01b038116811461013157600080fd5b6000806040838503121561260257600080fd5b823591506020830135612614816125da565b809150509250929050565b634e487b7160e01b600052602160045260246000fd5b634e487b7160e01b600052601160045260246000fd5b808201808211156114a0576114a0612635565b634e487b7160e01b600052603260045260246000fd5b60006020828403121561268657600080fd5b815180151581146123f957600080fd5b818103818111156114a0576114a0612635565b80820281158282048414176114a0576114a0612635565b6020808252600890820152672a2a16a32316981960c11b604082015260600190565b80516126ed816125da565b919050565b60006020828403121561270457600080fd5b81516123f9816125da565b6004811061272d57634e487b7160e01b600052602160045260246000fd5b9052565b600081518084526020808501945080840160005b8381101561276a5781516001600160a01b031687529582019590820190600101612745565b509495945050505050565b6000610180845461278a8460ff831615159052565b61279d6020850160ff8360081c1661270f565b60101c6001600160a01b0390811660408501526001860154606085015260028601546080850152600386015460a0850152600486015460c0850152600586015460e085015260068601546101008501526007860154610120850152600886015416610140840152610160830181905261281881840185612731565b95945050505050565b634e487b7160e01b600052604160045260246000fd5b6000602080838503121561284a57600080fd5b825167ffffffffffffffff8082111561286257600080fd5b818501915085601f83011261287657600080fd5b81518181111561288857612888612821565b8060051b604051601f19603f830116810181811085821117156128ad576128ad612821565b6040529182528482019250838101850191888311156128cb57600080fd5b938501935b828510156128f0576128e1856126e2565b845293850193928501926128d0565b98975050505050505050565b60006001820161290e5761290e612635565b5060010190565b60006020828403121561292757600080fd5b5051919050565b60008261294b57634e487b7160e01b600052601260045260246000fd5b500490565b634e487b7160e01b600052603160045260246000fd5b60008161297557612975612635565b50600019019056fe6751f7e27cecf86d7136f5749c224248cae80a39fafb59f8f6bf12c52816307c87101b21d556417ad2b8e8f2700dbad90721d5d50a1f435f2dee0b9dc981ac8a35fa70a6f9ae8a4d427ebe0c1be62ffd2870fecc1df41c6fda0bf5803e562888a26469706673582212205b50a379c1ff7f13ba44264475189cd38eb20e440fcdfa0071e70ebf8cc8134d64736f6c63430008120033",
  "deployedBytecode": "0x608060405234801561001057600080fd5b50600436106100885760003560e01c80636fee6ee81161005b5780636fee6ee8146100db5780637be2ecea146100ee5780638443162914610101578063ea28b9bb1461011457600080fd5b80630cee17251461008d5780632009844b146100a25780634b5c9c80146100b557806358733dec146100c8575b600080fd5b6100a061009b3660046125c1565b610127565b005b6100a06100b03660046125c1565b610134565b6100a06100c33660046125c1565b61016e565b6100a06100d63660046125c1565b6103bc565b6100a06100e93660046125ef565b610837565b6100a06100fc3660046125c1565b610845565b6100a061010f3660046125ef565b61084e565b6100a06101223660046125c1565b610883565b610131813361098d565b50565b600081815260008051602061297e833981519152602052604081209061015b828433610c40565b905061016983333384610f68565b505050565b610176611149565b600081815260008051602061297e833981519152602052604090208054600490610100900460ff16818111156101ae576101ae61261f565b1480156101cb575060038101546101c89062ed4e0061264b565b42115b6102075760405162461bcd60e51b815260206004820152600860248201526754542d46462d303360c01b60448201526064015b60405180910390fd5b6001810154600090815b818110156102f85760008460090160008660010184815481106102365761023661265e565b60009182526020808320909101546001600160a01b0316835282019290925260400190205411156102f05783600901600085600101838154811061027c5761027c61265e565b60009182526020808320909101546001600160a01b031683528201929092526040019020546102ab908461264b565b925060008460090160008660010184815481106102ca576102ca61265e565b60009182526020808320909101546001600160a01b031683528201929092526040019020555b600101610211565b5081156103b657825460405163a9059cbb60e01b8152336004820152602481018490526000916201000090046001600160a01b03169063a9059cbb906044016020604051808303816000875af1158015610356573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061037a9190612674565b9050806103b45760405162461bcd60e51b815260206004820152600860248201526715150b51918b4c0d60c21b60448201526064016101fe565b505b50505050565b600081815260008051602061297e8339815191526020908152604080832060008051602061299e83398151915290925290912060078101546002830154600484015461040a90600190612696565b836005015461041991906126a9565b610423919061264b565b61042d919061264b565b42116104665760405162461bcd60e51b815260206004820152600860248201526754542d46462d303160c01b60448201526064016101fe565b60018254610100900460ff1660048111156104835761048361261f565b146104a05760405162461bcd60e51b81526004016101fe906126c0565b60405163d8f8e99160e01b815260048101849052600090309063d8f8e99190602401602060405180830381865afa1580156104df573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061050391906126f2565b905061050e846111d2565b6105198460026113a3565b60008360010180548060200260200160405190810160405280929190818152602001828054801561057357602002820191906000526020600020905b81546001600160a01b03168152600190910190602001808311610555575b50508351600489015494955093925060009150505b8281101561080b5760008482815181106105a4576105a461265e565b60200260200101519050856001600160a01b0316816001600160a01b031614806105f257506000838152600c8901602090815260408083206001600160a01b038516845290915290205460ff165b1561065b57610604886011018261147f565b156106525761061688601101826114a6565b50856001600160a01b0316816001600160a01b0316036106435761063d88600f01826114bb565b50610652565b61065088600d01826114bb565b505b50600101610588565b6001600160a01b038116600090815260078901602052604090205460ff16156106d0576001600160a01b038116600090815260068901602052604090205460ff16156106b4576106ae88600f01826114bb565b506106c3565b6106c188600d01826114bb565b505b61063d88601101826114a6565b6106dd886011018261147f565b158015610756575060405163d7992e5b60e01b8152600481018a90526001600160a01b0382166024820152309063d7992e5b90604401602060405180830381865afa158015610730573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107549190612674565b155b156106525760405163d7992e5b60e01b8152600481018a90526001600160a01b0387166024820152309063d7992e5b90604401602060405180830381865afa1580156107a6573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107ca9190612674565b15610801576001600160a01b038116600090815260068901602052604090205460ff16156107fc576107fc89826114d0565b610652565b61065289826114d0565b506108168686611598565b856014015486600401541061082e5761082e876119aa565b50505050505050565b610841828261098d565b5050565b61013181611a48565b600082815260008051602061297e8339815191526020526040812090610875828585610c40565b90506103b684338584610f68565b60008181526000805160206129be8339815191526020908152604080832060008051602061297e83398151915283528184203385526004820190935292205460ff166108fc5760405162461bcd60e51b815260206004820152600860248201526754542d46462d303560c01b60448201526064016101fe565b60048154610100900460ff1660048111156109195761091961261f565b036109365760405162461bcd60e51b81526004016101fe906126c0565b336000818152600883016020526040808220805460ff81161560ff199091168117909155905190928392909187917f8bd3cffd2d87eca262a8e2d638c1ff3d3b61c604208115af6295b089acaf72b991a450505050565b600082815260008051602061297e833981519152602090815260408083206000805160206129be833981519152835281842033855260158201909352922054825460ff91821691600491610100900416818111156109ed576109ed61261f565b1480610a0a575033600090815260068401602052604090205460ff165b80610a125750805b610a495760405162461bcd60e51b81526020600482015260086024820152670a8a85a8c8c5a60760c31b60448201526064016101fe565b336000908152600984016020908152604080832054600a8701835281842054600687019093529220549115159160ff9091169015158280610a875750815b80610a8f5750805b610ac65760405162461bcd60e51b815260206004820152600860248201526754542d46462d303960c01b60448201526064016101fe565b8115610c1457600088815260008051602061299e8339815191526020908152604080832081516101608101909252805460ff80821615158452610ba6948401916101009004166003811115610b1d57610b1d61261f565b6003811115610b2e57610b2e61261f565b815281546001600160a01b036201000090910481166020830152600183015460408301526002830154606083015260038301546080830152600483015460a0830152600583015460c0830152600683015460e08301526007830154610100830152600890920154909116610120909101528833611c7d565b905060048754610100900460ff166004811115610bc557610bc561261f565b14610c03578015610c035760405162461bcd60e51b8152602060048201526008602482015267054542d46462d31360c41b60448201526064016101fe565b610c0e89338a611e0b565b50610c25565b8215610c2557610c25883389611e0b565b8015610c3657610c36883389611ff9565b5050505050505050565b600060018454610100900460ff166004811115610c5f57610c5f61261f565b1480610c85575060038454610100900460ff166004811115610c8357610c8361261f565b145b610ca15760405162461bcd60e51b81526004016101fe906126c0565b6001600160a01b038216600090815260058501602052604090205460ff16610cf65760405162461bcd60e51b81526020600482015260086024820152672a2a16a32316989960c11b60448201526064016101fe565b60008060018654610100900460ff166004811115610d1657610d1661261f565b03610de3576001600160a01b038416600090815260078701602052604090205460ff1615610d715760405162461bcd60e51b815260206004820152600860248201526754542d46462d313360c01b60448201526064016101fe565b5060048581015460405163d8f8e99160e01b815291820186905290309063d8f8e99190602401602060405180830381865afa158015610db4573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610dd891906126f2565b915060009250610eb3565b6001600160a01b038416600090815260168701602052604090205460ff1615610e395760405162461bcd60e51b815260206004820152600860248201526754542d46462d313360c01b60448201526064016101fe565b6004860154610e4990600161264b565b604051630b5646f760e21b8152600481018790529091503090632d591bdc90602401602060405180830381865afa158015610e88573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610eac91906126f2565b9150600192505b836001600160a01b0316826001600160a01b031603610eff5760405162461bcd60e51b815260206004820152600860248201526715150b51918b4c4d60c21b60448201526064016101fe565b6000818152600c8701602090815260408083206001600160a01b038816845290915290205460ff1615610f5f5760405162461bcd60e51b815260206004820152600860248201526754542d46462d313560c01b60448201526064016101fe565b50509392505050565b600084815260008051602061297e8339815191526020908152604080832060008051602061299e8339815191529092528220600681015491929091610fb090620f42406126a9565b83546040516323b872dd60e01b81526001600160a01b0389811660048301523060248301526044820184905292935060009262010000909204909116906323b872dd906064016020604051808303816000875af1158015611015573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906110399190612674565b9050806110735760405162461bcd60e51b815260206004820152600860248201526754542d46462d303760c01b60448201526064016101fe565b846110d3576001600160a01b0386166000818152600786016020526040808220805460ff19166001179055600487015490519092918b917fe1122b3cea22012386ebf236fc23dd8a783b91c046d5dec812901846464624ae9190a4610c36565b6001600160a01b03861660009081526016850160205260409020805460ff1916600190811790915560048501546111099161264b565b6040516001600160a01b038816908a907fe1122b3cea22012386ebf236fc23dd8a783b91c046d5dec812901846464624ae90600090a45050505050505050565b7fc8fcad8db84d3cc18b4c41d551ea0ee66dd599cde068d998e57d5e09332c131c600401546001600160a01b031633146111d05760405162461bcd60e51b815260206004820152602260248201527f4c69624469616d6f6e643a204d75737420626520636f6e7472616374206f776e60448201526132b960f11b60648201526084016101fe565b565b600060008051602061297e83398151915260008381526020919091526040808220905163d8f8e99160e01b815260048101859052909250309063d8f8e99190602401602060405180830381865afa158015611231573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061125591906126f2565b90506000826001018054806020026020016040519081016040528092919081815260200182805480156112b157602002820191906000526020600020905b81546001600160a01b03168152600190910190602001808311611293575b505083519394506000925050505b8181101561139b5760008382815181106112db576112db61265e565b60200260200101519050806001600160a01b0316856001600160a01b03160361130757506001016112bf565b6001600160a01b038116600090815260088701602052604090205460ff16801561134c57506001600160a01b038116600090815260078701602052604090205460ff16155b8015611382575060048601546000908152600c8701602090815260408083206001600160a01b038516845290915290205460ff16155b1561139257611392878283612170565b506001016112bf565b505050505050565b600082815260008051602061297e833981519152602052604090208054600490610100900460ff16818111156113db576113db61261f565b036114135760405162461bcd60e51b815260206004820152600860248201526754542d4c462d303360c01b60448201526064016101fe565b80548290829061ff0019166101008360048111156114335761143361261f565b021790555081600481111561144a5761144a61261f565b600482015460405185907fe515107ce875160b9ed93bfd1367820d3ffbf412cd63d05140f6bc5535b51de390600090a4505050565b6001600160a01b038116600090815260018301602052604081205415155b90505b92915050565b600061149d836001600160a01b0384166122a0565b600061149d836001600160a01b038416612393565b600082815260008051602061297e83398151915260205260408120906114f9600d8301846114a6565b9050806115105761150d82600f01846114a6565b90505b806115485760405162461bcd60e51b81526020600482015260086024820152672a2a16a32316981b60c11b60448201526064016101fe565b61155582601101846114bb565b50826001600160a01b03168260040154857f482c1cb26174abc97f4629d6f41ab133dbda268210ea1ced6c07c27857469a0360405160405180910390a450505050565b600281015460405163d8f8e99160e01b8152600091309163d8f8e991916115c59160040190815260200190565b602060405180830381865afa1580156115e2573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061160691906126f2565b90506000611616846011016123e2565b111561174657600030632081c1af84611631601188016123ec565b6040518363ffffffff1660e01b815260040161164e929190612775565b6000604051808303816000875af115801561166d573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526116959190810190612837565b805190915060005b818110156117425760006001600160a01b03168382815181106116c2576116c261265e565b60200260200101516001600160a01b031614806117095750836001600160a01b03168382815181106116f6576116f661265e565b60200260200101516001600160a01b0316145b156117165760010161169d565b61173a868685848151811061172d5761172d61265e565b6020026020010151612400565b60010161169d565b5050505b61175383600d01826114a6565b156117675761176583600f01826114bb565b505b6001600160a01b03811660009081526006840160209081526040808320805460ff191660019081179091558601805482518185028101850190935280835284938301828280156117e057602002820191906000526020600020905b81546001600160a01b031681526001909101906020018083116117c2575b505083519394506000925050505b818110156118505786600701600084838151811061180e5761180e61265e565b6020908102919091018101516001600160a01b031682528101919091526040016000205460ff16156118485783611844816128fc565b9450505b6001016117ee565b50604080516101608101909152855460ff80821615158352611914929188916020840191610100900416600381111561188b5761188b61261f565b600381111561189c5761189c61261f565b815281546001600160a01b036201000090910481166020830152600183015460408301526002830154606083015260038301546080830152600483015460a0830152600583015460c0830152600683015460e08301526007830154610100830152600890920154909116610120909101528786611c7d565b5082856006015461192591906126a9565b61193290620f42406126a9565b6001600160a01b03851660009081526009880160205260408120805490919061195c90849061264b565b909155505060028501546040516001600160a01b03861691907f1f2267669c1e46109302869b7cd09b21fd5ac4d2da01a6bbc086c1fe7b997fa390600090a361139b856002015460036113a3565b600081815260008051602061297e8339815191526020908152604080832060008051602061299e833981519152909252909120426003830155805461ff0019166103001781556119fb8360046113a3565b6040516339007b7760e01b81526004810184905230906339007b7790602401600060405180830381600087803b158015611a3457600080fd5b505af115801561082e573d6000803e3d6000fd5b600081815260008051602061297e8339815191526020908152604080832060008051602061299e833981519152909252909120600282015460048301546005830154611a9491906126a9565b611a9e919061264b565b4211611ad75760405162461bcd60e51b815260206004820152600860248201526754542d4c462d303160c01b60448201526064016101fe565b60008254610100900460ff166004811115611af457611af461261f565b1480611b1a575060038254610100900460ff166004811115611b1857611b1861261f565b145b611b515760405162461bcd60e51b81526020600482015260086024820152672a2a16a62316981960c11b60448201526064016101fe565b8160040160008154611b62906128fc565b90915550600182015460005b81811015611c6857836016016000856001018381548110611b9157611b9161265e565b60009182526020808320909101546001600160a01b0316835282019290925260400181205460018601805460ff90921692600788019290919085908110611bda57611bda61265e565b6000918252602080832091909101546001600160a01b031683528201929092526040018120805460ff1916921515929092179091556001850180546016870191839185908110611c2c57611c2c61265e565b6000918252602080832091909101546001600160a01b031683528201929092526040019020805460ff1916911515919091179055600101611b6e565b50611c748460016113a3565b6103b6846111d2565b608083015160009081526000805160206129be833981519152602090815260408083206001600160a01b03851684526015860190925282205460ff168015611ce6576001600160a01b0384166000908152600a860160205260409020805460ff19169055611de4565b608086015160405163f0d826e760e01b8152600091309163f0d826e791611d139160040190815260200190565b602060405180830381865afa158015611d30573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611d549190612915565b905060006064611d6583606e6126a9565b611d6f919061292e565b6001600160a01b0387166000908152600586016020526040902054909150811115611dbe576001600160a01b0386166000908152600a880160205260409020805460ff19166001179055611de1565b6001600160a01b0386166000908152600a880160205260409020805460ff191690555b50505b5050506001600160a01b03166000908152600a91909101602052604090205460ff16919050565b600060008051602061297e8339815191526000858152602091825260408082206001600160a01b0387811684526009820190945281832054815492516370a0823160e01b81523060048201529195509362010000909204909116906370a0823190602401602060405180830381865afa158015611e8c573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611eb09190612915565b905081811015611edd5760405163cf47918160e01b815260048101829052602481018390526044016101fe565b6001600160a01b0385811660009081526009850160205260408082208290558554905163a9059cbb60e01b8152878416600482015260248101869052919262010000909104169063a9059cbb906044016020604051808303816000875af1158015611f4c573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611f709190612674565b905080611faa5760405162461bcd60e51b815260206004820152600860248201526715150b51918b4c0d60c21b60448201526064016101fe565b506040516001600160a01b03858116825283919087169088907fe7e8d59c293d6fd984f4662b0040f878f38468324cb305b1e3153ca7f220fbb7906020015b60405180910390a4505050505050565b600083815260008051602061297e833981519152602052604090205460ff1661204f5760405162461bcd60e51b815260206004820152600860248201526754542d4c432d303160c01b60448201526064016101fe565b60008381526000805160206129be833981519152602090815260408083206001600160a01b03861684526006810190925290912054806120bc5760405162461bcd60e51b81526020600482015260086024820152672a2a16a62196981960c11b60448201526064016101fe565b6001600160a01b03848116600090815260068401602052604080822082905551909185169083908381818185875af1925050503d806000811461211b576040519150601f19603f3d011682016040523d82523d6000602084013e612120565b606091505b505090508061212e57600080fd5b6040516001600160a01b03858116825283919087169088907f9ab9de9b3736782afba7d3401b3151a36aaf0b758b1db77e9c96536b73d0258090602001611fe9565b600083815260008051602061297e8339815191526020908152604080832060008051602061299e83398151915290925282206006810154919290916121b890620f42406126a9565b83546040516323b872dd60e01b81526001600160a01b0388811660048301523060248301526044820184905292935062010000909104909116906323b872dd906064016020604051808303816000875af1925050508015612236575060408051601f3d908101601f1916820190925261223391810190612674565b60015b1561139b57801561082e576001600160a01b0385166000818152600786016020526040808220805460ff19166001179055600487015490519092918a917fe1122b3cea22012386ebf236fc23dd8a783b91c046d5dec812901846464624ae9190a450505050505050565b600081815260018301602052604081205480156123895760006122c4600183612696565b85549091506000906122d890600190612696565b905081811461233d5760008660000182815481106122f8576122f861265e565b906000526020600020015490508087600001848154811061231b5761231b61265e565b6000918252602080832090910192909255918252600188019052604090208390555b855486908061234e5761234e612950565b6001900381819060005260206000200160009055905585600101600086815260200190815260200160002060009055600193505050506114a0565b60009150506114a0565b60008181526001830160205260408120546123da575081546001818101845560008481526020808220909301849055845484825282860190935260409020919091556114a0565b5060006114a0565b60006114a0825490565b606060006123f983612565565b9392505050565b6001600160a01b038116600090815260058401602052604090205460ff168015612432575061243283601101826114a6565b6124695760405162461bcd60e51b815260206004820152600860248201526754542d46462d313160c01b60448201526064016101fe565b600282015460009081526000805160206129be833981519152602090815260408083206001600160a01b0385168452600587018352818420805460ff1990811690915560048201845282852080549091169055600687019092529091205460ff166124f4576001600160a01b03821660009081526015850160205260409020805460ff191660011790555b826004016000815461250590612966565b9091555060138401805460009061251b906128fc565b90915550600484015460028401546040516001600160a01b0385169291907f75072bae902443c91c7fe516bbb4da2a101e088aa10737ec2ecb7aa3beb023d190600090a450505050565b6060816000018054806020026020016040519081016040528092919081815260200182805480156125b557602002820191906000526020600020905b8154815260200190600101908083116125a1575b50505050509050919050565b6000602082840312156125d357600080fd5b5035919050565b6001600160a01b038116811461013157600080fd5b6000806040838503121561260257600080fd5b823591506020830135612614816125da565b809150509250929050565b634e487b7160e01b600052602160045260246000fd5b634e487b7160e01b600052601160045260246000fd5b808201808211156114a0576114a0612635565b634e487b7160e01b600052603260045260246000fd5b60006020828403121561268657600080fd5b815180151581146123f957600080fd5b818103818111156114a0576114a0612635565b80820281158282048414176114a0576114a0612635565b6020808252600890820152672a2a16a32316981960c11b604082015260600190565b80516126ed816125da565b919050565b60006020828403121561270457600080fd5b81516123f9816125da565b6004811061272d57634e487b7160e01b600052602160045260246000fd5b9052565b600081518084526020808501945080840160005b8381101561276a5781516001600160a01b031687529582019590820190600101612745565b509495945050505050565b6000610180845461278a8460ff831615159052565b61279d6020850160ff8360081c1661270f565b60101c6001600160a01b0390811660408501526001860154606085015260028601546080850152600386015460a0850152600486015460c0850152600586015460e085015260068601546101008501526007860154610120850152600886015416610140840152610160830181905261281881840185612731565b95945050505050565b634e487b7160e01b600052604160045260246000fd5b6000602080838503121561284a57600080fd5b825167ffffffffffffffff8082111561286257600080fd5b818501915085601f83011261287657600080fd5b81518181111561288857612888612821565b8060051b604051601f19603f830116810181811085821117156128ad576128ad612821565b6040529182528482019250838101850191888311156128cb57600080fd5b938501935b828510156128f0576128e1856126e2565b845293850193928501926128d0565b98975050505050505050565b60006001820161290e5761290e612635565b5060010190565b60006020828403121561292757600080fd5b5051919050565b60008261294b57634e487b7160e01b600052601260045260246000fd5b500490565b634e487b7160e01b600052603160045260246000fd5b60008161297557612975612635565b50600019019056fe6751f7e27cecf86d7136f5749c224248cae80a39fafb59f8f6bf12c52816307c87101b21d556417ad2b8e8f2700dbad90721d5d50a1f435f2dee0b9dc981ac8a35fa70a6f9ae8a4d427ebe0c1be62ffd2870fecc1df41c6fda0bf5803e562888a26469706673582212205b50a379c1ff7f13ba44264475189cd38eb20e440fcdfa0071e70ebf8cc8134d64736f6c63430008120033",
  "devdoc": {
    "author": "Mohammed Haddouti",
    "details": "v3.0 (Diamond)",
    "errors": {
      "InsufficientBalance(uint256,uint256)": [
        {
          "details": "Insufficient balance for transfer. Needed `required` but only `available` available.",
          "params": {
            "available": "balance available.",
            "required": "requested amount to transfer."
          }
        }
      ]
    },
    "kind": "dev",
    "methods": {
      "closeFundingPeriod(uint256)": {
        "details": "Revert if there is still time to contributeRevert if Fund is not accepting contributions",
        "params": {
          "termId": "the id of the term"
        }
      },
      "emptyFundAfterEnd(uint256)": {
        "details": "Revert if the caller is not the term ownerRevert if the time is not met (180 days)",
        "params": {
          "termId": "the id of the term"
        }
      },
      "payContribution(uint256)": {
        "params": {
          "termId": "the id of the term"
        }
      },
      "payContributionOnBehalfOf(uint256,address)": {
        "params": {
          "participant": "the address the msg.sender is paying for, the address must be part of the fund",
          "termId": "the id of the term"
        }
      },
      "startNewCycle(uint256)": {
        "params": {
          "termId": "the id of the term"
        }
      },
      "toggleAutoPay(uint256)": {
        "details": "Revert if the user is not a collateral memberRevert if the Fund is closedIt needs the user to have enough tokens and allow the contract as spenderCan be set before the Fund starts",
        "params": {
          "termId": "the id of the term"
        }
      },
      "withdrawFund(uint256)": {
        "details": "This follows the pull-over-push pattern.",
        "params": {
          "termId": "the id of the term"
        }
      },
      "withdrawFundOnAnotherWallet(uint256,address)": {
        "details": "This follows the pull-over-push pattern.",
        "params": {
          "receiver": "the address that will receive the fund",
          "termId": "the id of the term"
        }
      }
    },
    "title": "Takaturn Fund Facet",
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {
      "closeFundingPeriod(uint256)": {
        "notice": "Must be called at the end of the contribution period after the time has passed by the owner"
      },
      "emptyFundAfterEnd(uint256)": {
        "notice": "allow the owner to empty the fund if there's any excess fund left after 180 days,         this with the assumption that beneficiaries can't claim it themselves due to losing their keys for example,         and prevent the fund to be stuck in limbo"
      },
      "payContribution(uint256)": {
        "notice": "This is the function participants call to pay the contribution"
      },
      "payContributionOnBehalfOf(uint256,address)": {
        "notice": "This function is here to give the possibility to pay using a different wallet"
      },
      "startNewCycle(uint256)": {
        "notice": "starts a new cycle manually called by the owner. Only the first cycle starts automatically upon deploy"
      },
      "toggleAutoPay(uint256)": {
        "notice": "function to enable/disable autopay"
      },
      "withdrawFund(uint256)": {
        "notice": "Called by the beneficiary to withdraw the fund"
      },
      "withdrawFundOnAnotherWallet(uint256,address)": {
        "notice": "Called by the beneficiary to withdraw the fund"
      }
    },
    "notice": "This is used to operate the Takaturn fund",
    "version": 1
  },
  "storageLayout": {
    "storage": [],
    "types": null
  }
}